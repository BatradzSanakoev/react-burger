{"version":3,"sources":["components/Count/Count.module.css","components/ModalOverlay/ModalOverlay.module.css","pages/FeedDetails/FeedDetails.module.css","pages/Profile/Profile.module.css","components/AppHeader/AppHeader.module.css","pages/Feed/Feed.module.css","services/hooks.ts","components/AppHeader/AppHeader.tsx","components/Count/Count.tsx","components/BurgerIngredient/BurgerIngredient.tsx","components/BurgerIngredients/BurgerIngredients.tsx","services/types.ts","services/actions/burgerConstructor.ts","components/BurgerConstructorItem/BurgerConstructorItem.tsx","services/actions/user.ts","utils/constants.ts","services/actions/order.ts","components/BurgerConstructor/BurgerConstructor.tsx","components/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","components/IngredientDetails/IngredientDetails.tsx","images/done.png","components/OrderDetails/OrderDetails.tsx","services/actions/burgerIngredients.ts","pages/Login/Login.tsx","pages/Register/Register.tsx","pages/ForgotPassword/ForgotPassword.tsx","pages/ResetPassword/ResetPassword.tsx","components/CustomInputs/PasswordInput.tsx","components/CustomInputs/EmailInput.tsx","components/CustomInputs/NameInput.tsx","images/ingredients.png","components/OrderCard/OrderCard.tsx","pages/Profile/Profile.tsx","pages/Feed/Feed.tsx","components/ProtectedRoute/ProtectedRoute.tsx","pages/FeedDetails/FeedDetails.tsx","components/App/App.tsx","services/reducers/order.ts","services/reducers/burgerConstructor.ts","services/reducers/burgerIngredients.ts","services/reducers/user.ts","services/reducers/orders.ts","services/reducers/index.ts","services/store.ts","services/middlewares/socketMiddleware.ts","index.tsx","components/BurgerConstructorItem/BurgerConstructorItem.module.css","components/IngredientDetails/IngredientDetails.module.css","components/BurgerIngredients/BurgerIngredients.module.css","pages/ResetPassword/ResetPassword.module.css","components/BurgerIngredient/BurgerIngredient.module.css","components/BurgerConstructor/BurgerConstructor.module.css","pages/Login/Login.module.css","components/OrderDetails/OrderDetails.module.css","pages/Register/Register.module.css","pages/ForgotPassword/ForgotPassword.module.css","components/OrderCard/OrderCard.module.css","components/Modal/Modal.module.css","components/App/App.module.css"],"names":["module","exports","useSelector","selectorHook","useDispatch","dispatchHook","AppHeader","pathname","useLocation","className","appHeader","header","headerContent","navGroup","exact","to","navButton","activeClassName","activeNavButton","type","navText","style","justifyContent","includes","Count","count","countStyles","element","BurgerIngredient","props","location","history","useHistory","state","burgerConstructor","constructorBuns","constructorIngredients","bunsCount","useMemo","_id","ingredientCount","forEach","item","useDrag","name","image","price","collect","monitor","opacity","isDragging","dragRef","burgerIngredient","onClick","replace","backgroundForIngredient","ref","src","alt","priceValue","margin","BurgerIngredients","data","burgerIngredients","ingredients","tabsRef","useRef","bunsRef","saucesRef","mainsRef","useState","currentTab","setCurrentTab","buns","filter","sauces","main","content","marginBottom","tabs","value","active","console","log","categories","onScroll","tabsTop","current","getBoundingClientRect","top","bunsDistance","Math","abs","saucesDistance","mainsDistance","minValue","min","category","map","image_large","GET_BURGER_INGREDIENTS_REQUEST","GET_BURGER_INGREDIENTS_SUCCESS","GET_BURGER_INGREDIENTS_FAILED","ADD_CONSTRUCTOR_INGREDIENT","DELETE_CONSTRUCTOR_INGREDIENT","INCREASE_CONSTRUCTOR_COUNT","DECREASE_CONSTRUCTOR_COUNT","ADD_CONSTRUCTOR_BUN","UPDATE_CONSTRUCTOR_INGREDIENTS","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_FAILED","CLEAR_ORDER","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILED","AUTH_REQUEST","AUTH_SUCCESS","AUTH_FAILED","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILED","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAILED","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","increaseConstructorCount","decreaseConstructorCount","BurgerConstructorItem","dispatch","useDrop","accept","hover","dragIndex","index","hoverIndex","hoverBoundingRect","hoverMiddleY","bottom","hoverClientY","getClientOffset","y","payload","updateConstructorIngredients","dropRef","burgerConstructorItem","itemDataBunTop","itemDataBunBottom","itemData","key","uniqueKey","register","email","password","fetch","MAIN_API","method","headers","body","JSON","stringify","then","res","ok","json","err","Promise","reject","success","push","catch","login","accessToken","split","setCookies","refreshToken","user","refresh","getCookie","token","logout","deleteCookies","getUser","retriableFetch","authorization","updateUser","WS_Url","emailRegex","matches","document","cookie","match","RegExp","decodeURIComponent","undefined","exp","path","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","url","options","a","message","refreshTokens","getDate","date","currentDate","slice","toISOString","getOrder","itemsId","number","order","BurgerConstructor","isAuth","summaryPrice","sum","isHover","isOver","drop","random","toString","addConstructorBun","addConstructorIngredient","border","borderRadius","length","list","height","display","alignItems","summary","summaryPriceValue","size","onModalType","onModalOpen","disabled","ModalOverlay","children","onModalClose","modalOverlay","overlay","e","target","currentTarget","modalRoot","getElementById","Modal","modalHeightValue","closeByEscape","code","useEffect","addEventListener","removeEventListener","ReactDOM","createPortal","modal","closeIcon","IngredientDetails","id","useParams","ingredientsLoaded","currentIngredient","find","ingredientDetails","container","background","properties","property","calories","proteins","fat","carbohydrates","OrderDetails","orderNumber","orderRequest","orderDetails","orderIdText","doneIcon","width","getBurgerIngredients","Login","getUserRequest","setEmail","setPassword","onChange","from","loginStyles","section","onSubmit","preventDefault","noValidate","form","link","Register","errorText","registerError","username","setUsername","emailError","setEmailError","registerStyles","placeholder","error","color","ForgotPassword","forgotPageVisited","forgotPassword","ResetPassword","showPassword","setShowPassword","setCode","passwordRef","onIconClick","setTimeout","focus","resetPassword","classList","alert","hideInput","icon","PasswordInput","fieldDisabled","setDisabled","visible","setVisible","setError","inputRef","onBlur","validateField","onFocus","EmailInput","test","NameInput","OrderCard","orderSum","prop","i","orderCard","card","backgroundForFeed","backgroundForProfile","numberInfo","createdAt","status","detailsInfo","tempImage","cost","Profile","orders","setName","profile","navColumn","navBar","navLink","activeNavLink","profileColumn","profileInfo","ordersList","updatedAt","Feed","total","totalToday","doneOrders","pendingOrders","feed","ordersNumbers","ordersReady","colorfulDigits","ordersInWork","largeDigits","ProtectedRoute","rest","render","FeedDetails","ingredientsInOrder","result","ingredientsInfo","orderPrice","flexDirection","textAlign","feedDetails","image_mobile","App","modalDisplay","setModalDisplay","modalType","setModalType","handleOpenModal","useCallback","handleCloseModal","handleSetOrderType","React","appStyles","DndProvider","backend","HTML5Backend","initialState","orderFailed","constructorCount","ingredientsRequest","ingredientsFailed","registerRequest","authRequest","authError","logoutRequest","logoutError","getUserError","getUserLoaded","userUpdateRequest","userUpdateError","ordersAllRequest","ordersAllFailed","wsConnected","rootReducer","combineReducers","action","newConstructorIngredients","splice","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","socket","next","getState","WebSocket","onopen","event","onerror","onclose","onmessage","parse","createStore","StrictMode","basename","process"],"mappings":"uGACAA,EAAOC,QAAU,CAAC,QAAU,yB,oBCA5BD,EAAOC,QAAU,CAAC,QAAU,gC,oBCA5BD,EAAOC,QAAU,CAAC,KAAO,4B,mBCAzBD,EAAOC,QAAU,CAAC,KAAO,sBAAsB,QAAU,yBAAyB,UAAY,2BAA2B,OAAS,wBAAwB,QAAU,yBAAyB,cAAgB,+BAA+B,QAAU,yBAAyB,cAAgB,+BAA+B,YAAc,6BAA6B,WAAa,8B,yCCAtXD,EAAOC,QAAU,CAAC,OAAS,0BAA0B,cAAgB,iCAAiC,SAAW,4BAA4B,UAAY,6BAA6B,gBAAkB,mCAAmC,QAAU,6B,mBCArPD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,QAAU,sBAAsB,KAAO,mBAAmB,WAAa,yBAAyB,OAAS,qBAAqB,cAAgB,4BAA4B,YAAc,0BAA0B,aAAe,mDAAmD,eAAiB,6BAA6B,YAAc,4B,4GCE/WC,EAA+CC,IAC/CC,EAAc,kBAAMC,e,wDC8BlBC,EA7BG,WAChB,IAAQC,EAAaC,cAAbD,SACR,OACE,wBAAQE,UAAS,UAAKC,IAAUC,OAAf,cAAjB,SACE,sBAAKF,UAAWC,IAAUE,cAA1B,UACE,sBAAKH,UAAS,UAAKC,IAAUG,UAA7B,UACE,eAAC,IAAD,CAASC,OAAK,EAACC,GAAG,IAAIN,UAAS,UAAKC,IAAUM,UAAf,6BAAqDC,gBAAiBP,IAAUQ,gBAA/G,UACE,cAAC,aAAD,CAAYC,KAAI,UAAkB,MAAbZ,EAAmB,UAAY,eACpD,mBAAGE,UAAS,0CAAqCC,IAAUU,SAA3D,mFAEF,eAAC,IAAD,CAASN,OAAK,EAACC,GAAG,QAAQN,UAAS,UAAKC,IAAUM,UAAf,wBAAgDC,gBAAiBP,IAAUQ,gBAA9G,UACE,cAAC,WAAD,CAAUC,KAAI,UAAkB,UAAbZ,EAAuB,UAAY,eACtD,mBAAGE,UAAS,0CAAqCC,IAAUU,SAA3D,6FAGJ,cAAC,IAAD,CAAML,GAAG,IAAT,SACE,cAAC,OAAD,MAEF,qBAAKN,UAAS,UAAKC,IAAUG,UAAYQ,MAAO,CAAEC,eAAgB,YAAlE,SACE,eAAC,IAAD,CAASP,GAAG,WAAWN,UAAS,UAAKC,IAAUM,UAAf,wBAAgDC,gBAAiBP,IAAUQ,gBAA3G,UACE,cAAC,cAAD,CAAaC,KAAI,UAAKZ,EAASgB,SAAS,YAAc,UAAY,eAClE,mBAAGd,UAAS,0CAAqCC,IAAUU,SAA3D,wG,6DCTGI,EAZD,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,MACf,OACE,mCACGA,EAAS,GACR,qBAAKhB,UAAWiB,IAAYC,QAA5B,SACE,mBAAGlB,UAAU,4BAAb,SAA0CgB,SCiDrCG,EAhDU,SAACC,GACxB,IAAMC,EAAWtB,cACXuB,EAAUC,cAChB,EAAoD9B,GAAY,SAAA+B,GAAK,OAAIA,EAAMC,qBAAvEC,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,uBAEnBC,EAAYC,mBAAQ,WACxB,GAAKH,EACL,OAAIA,EAAwBA,EAAgBI,MAAQV,EAAMU,KAAO,OAAjE,IACC,CAACJ,IAEEK,EAAkBF,mBAAQ,WAC9B,IAAIb,EAAQ,EAIZ,OAHAW,EAAuBK,SAAQ,SAAAC,GACzBA,EAAKH,MAAQV,EAAMU,MAAKd,GAAgB,MAEvCA,IACN,CAACW,IASJ,EAA+BO,YAAQ,CACrCxB,KAAM,aACNuB,KAAM,CAAEH,IAAKV,EAAMU,IAAKK,KAAMf,EAAMe,KAAMzB,KAAMU,EAAMV,KAAM0B,MAAOhB,EAAMgB,MAAOC,MAAOjB,EAAMiB,OAC7FC,QAAS,SAAAC,GAAO,MAAK,CACnBC,QAASD,EAAQE,aAAe,GAAM,MAJ1C,mBAASD,EAAT,KAASA,QAAWE,EAApB,KAQA,OACE,sBAAK1C,UAAW2C,IAAiBV,KAAMW,QAhBrB,WAClBtB,EAAQuB,QAAQ,CACd/C,SAAS,gBAAD,OAAkBsB,EAAMU,KAChCN,MAAO,CAAEsB,wBAAyBzB,MAayB0B,IAAKL,EAAS9B,MAAO,CAAE4B,QAAQ,GAAD,OAAKA,IAAhG,UACE,cAAC,EAAD,CAAOxB,MAAsB,QAAfI,EAAMV,KAAiBkB,EAAYG,IACjD,qBAAKiB,IAAK5B,EAAMgB,MAAOa,IAAI,cAAcjD,UAAW2C,IAAiBP,QACrE,sBAAKpC,UAAS,UAAK2C,IAAiBN,MAAtB,SAAd,UACE,mBAAGrC,UAAS,qCAAgC2C,IAAiBO,YAA7D,SAA4E9B,EAAMiB,QAClF,cAAC,eAAD,CAAc3B,KAAK,eAErB,mBAAGE,MAAO,CAAEuC,OAAQ,GAAKnD,UAAS,qCAAgC2C,IAAiBR,KAAjD,SAAlC,SACGf,EAAMe,WCsCAiB,EArFW,WACxB,IAAMC,EAAO5D,GAAY,SAAA+B,GAAK,OAAIA,EAAM8B,kBAAkBC,eACpDC,EAAUC,iBAAuB,MACjCC,EAAUD,iBAAuB,MACjCE,EAAYF,iBAAuB,MACnCG,EAAWH,iBAAuB,MACxC,EAAoCI,mBAAS,OAA7C,mBAAOC,EAAP,KAAmBC,EAAnB,KACMC,EAAOnC,mBAAQ,WACnB,OAAOwB,GAAQA,EAAKY,QAAO,SAAAhC,GAAI,MAAkB,QAAdA,EAAKvB,UACvC,CAAC2C,IACEa,EAASrC,mBAAQ,WACrB,OAAOwB,GAAQA,EAAKY,QAAO,SAAAhC,GAAI,MAAkB,UAAdA,EAAKvB,UACvC,CAAC2C,IACEc,EAAOtC,mBAAQ,WACnB,OAAOwB,GAAQA,EAAKY,QAAO,SAAAhC,GAAI,MAAkB,SAAdA,EAAKvB,UACvC,CAAC2C,IAiBJ,OACE,sBAAKrD,UAAWsD,IAAkBc,QAAlC,UACE,oBAAIpE,UAAU,kCAAkCY,MAAO,CAAEyD,aAAc,GAAvE,mGAGA,sBAAKrE,UAAS,UAAKsD,IAAkBgB,KAAvB,SAAoCvB,IAAKS,EAAvD,UACE,cAAC,MAAD,CAAKe,MAAM,MAAMC,OAAuB,QAAfV,EAAsBlB,QAAS,kBAAM6B,QAAQC,IAAI,aAA1E,4CAGA,cAAC,MAAD,CAAKH,MAAM,QAAQC,OAAuB,UAAfV,EAAwBlB,QAAS,kBAAM6B,QAAQC,IAAI,aAA9E,4CAGA,cAAC,MAAD,CAAKH,MAAM,OAAOC,OAAuB,SAAfV,EAAuBlB,QAAS,kBAAM6B,QAAQC,IAAI,aAA5E,2DAIDrB,EACC,sBAAKrD,UAAWsD,IAAkBqB,WAAYC,SAhC7B,WACrB,IAAMC,EAAUrB,EAAQsB,QAASC,wBAAwBC,IACnDC,EAAeC,KAAKC,IAAIN,EAAWnB,EAAQoB,QAASC,wBAAwBC,KAC5EI,EAAiBF,KAAKC,IAAIN,EAAWlB,EAAUmB,QAASC,wBAAwBC,KAChFK,EAAgBH,KAAKC,IAAIN,EAAWjB,EAASkB,QAASC,wBAAwBC,KAC9EM,EAAWJ,KAAKK,IAAIN,EAAcG,EAAgBC,GAEtDtB,EADEuB,IAAaL,EACD,MACLK,IAAaF,EACR,QAEA,SAqBZ,UACE,oBAAIpF,UAAU,mCAAmCY,MAAO,CAAEyD,aAAc,GAAxE,4CAGA,qBAAKrE,UAAS,UAAKsD,IAAkBkC,SAAvB,cAA6CzC,IAAKW,EAAhE,SACGM,GACCA,EAAKyB,KAAI,SAAAxD,GAAI,OACX,cAAC,EAAD,CAAiCH,IAAKG,EAAKH,IAAKpB,KAAMuB,EAAKvB,KAAM0B,MAAOH,EAAKyD,YAAarD,MAAOJ,EAAKI,MAAOF,KAAMF,EAAKE,MAAjGF,EAAKH,UAGlC,oBAAI9B,UAAU,mCAAmCY,MAAO,CAAEyD,aAAc,GAAxE,4CAGA,qBAAKrE,UAAS,UAAKsD,IAAkBkC,SAAvB,cAA6CzC,IAAKY,EAAhE,SACGO,GACCA,EAAOuB,KAAI,SAAAxD,GAAI,OACb,cAAC,EAAD,CAAiCH,IAAKG,EAAKH,IAAKpB,KAAMuB,EAAKvB,KAAM0B,MAAOH,EAAKyD,YAAarD,MAAOJ,EAAKI,MAAOF,KAAMF,EAAKE,MAAjGF,EAAKH,UAGlC,oBAAI9B,UAAU,mCAAmCY,MAAO,CAAEyD,aAAc,GAAxE,wDAGA,qBAAKrE,UAAS,UAAKsD,IAAkBkC,SAAvB,cAA6CzC,IAAKa,EAAhE,SACGO,GACCA,EAAKsB,KAAI,SAAAxD,GAAI,OACX,cAAC,EAAD,CAAiCH,IAAKG,EAAKH,IAAKpB,KAAMuB,EAAKvB,KAAM0B,MAAOH,EAAKyD,YAAarD,MAAOJ,EAAKI,MAAOF,KAAMF,EAAKE,MAAjGF,EAAKH,aAKpC,iC,mDCrFK6D,EAAmE,iCACnEC,EAAmE,iCACnEC,EAAiE,gCAEjEC,EAA2D,6BAC3DC,EAAiE,gCACjEC,EAA2D,6BAC3DC,EAA2D,6BAC3DC,EAA6C,sBAC7CC,EAAmE,iCAInEC,EAAyC,oBACzCC,EAAyC,oBACzCC,EAAuC,mBAGvCC,EAA6B,cAE7BC,EAAuC,mBACvCC,EAAuC,mBACvCC,EAAqC,kBAErCC,EAA+B,eAC/BC,EAA+B,eAC/BC,GAA6B,cAE7BC,GAAmC,iBACnCC,GAAmC,iBACnCC,GAAiC,gBAEjCC,GAAuC,mBACvCC,GAAuC,mBACvCC,GAAqC,kBAErCC,GAA6C,sBAC7CC,GAA6C,sBAC7CC,GAA2C,qBAM3CC,GAA6C,sBAC7CC,GAAiD,wBACjDC,GAA6C,sBAC7CC,GAA+C,uBAC/CC,GAAmC,iBCVnCC,GAA2B,WACtC,MAAO,CAAElH,KAAMsF,IAGJ6B,GAA2B,WACtC,MAAO,CAAEnH,KAAMuF,ICuCF6B,GAlEe,SAAC1G,GAC7B,IAAM2G,EAAWpI,IACXoD,EAAMU,iBAAuB,MAiBnC,EAAoBuE,YAAQ,CAC1BC,OAAQ,cACRC,MAAO,SAACjG,EAAmCM,GACzC,GAAKQ,EAAI+B,QAAT,CACA,IAAMqD,EAAYlG,EAAKmG,MACjBC,EAAajH,EAAMgH,MACzB,GAAID,IAAcE,EAAlB,CACA,IAAMC,EAAoBvF,EAAI+B,QAAQC,wBAChCwD,GAAgBD,EAAkBE,OAASF,EAAkBtD,KAAO,EAEpEyD,EADelG,EAAQmG,kBACMC,EAAIL,EAAkBtD,IACrDmD,EAAaE,GAAeI,EAAeF,GAC3CJ,EAAaE,GAAeI,EAAeF,IAC/CR,EDIsC,SAACI,EAAmBE,GAC9D,MAAO,CACL3H,KAAMyF,EACNyC,QAAS,CAAET,YAAWE,eCPXQ,CAA6BV,EAAYE,IAClDpG,EAAKmG,MAAQC,QAdRS,EAAT,oBAkBA,EAA+B5G,YAAQ,CACrCxB,KAAM,cACNuB,KAAM,CAAEmG,MAAOhH,EAAMgH,OACrB9F,QAAS,SAAAC,GAAO,MAAK,CACnBC,QAASD,EAAQE,aAAe,EAAI,MAJxC,mBAASD,EAAT,KAASA,QAUT,OAFAE,EARA,MAQQoG,EAAQ/F,IAGd,sBACE/C,UAAS,UAAK+I,IAAsB9G,MACpCrB,MAAO,CAAEC,eAAe,GAAD,OAAKO,EAAMV,MAAQ,YAAc8B,QAAQ,GAAD,OAAKA,IACpEO,IAAM3B,EAAMV,KAAa,KAANqC,EAHrB,WAII3B,EAAMV,MAAQ,cAAC,WAAD,CAAUA,KAAK,YAC/B,sBAAKV,UAAS,UA5CXoB,EAAMV,KACQ,YAAfU,EAAMV,KAA2BqI,IAAsBC,eACxC,eAAf5H,EAAMV,KAA8BqI,IAAsBE,uBAA9D,EAFwBF,IAAsBG,SA4C9B,wBAAd,UACE,qBAAKjG,IAAI,YAAYD,IAAK5B,EAAMgB,MAAOpC,UAAW+I,IAAsB3G,QACxE,mBAAGpC,UAAS,qCAAgC+I,IAAsB5G,MAAlE,mBAA8Ef,EAAMe,KAApF,YAnDCf,EAAMV,KACQ,YAAfU,EAAMV,KAA2B,6BAClB,eAAfU,EAAMV,KAA8B,4BAAxC,EAFwB,MAoDpB,sBAAKV,UAAW+I,IAAsB1G,MAAtC,UACE,mBAAGrC,UAAS,qCAAgC+I,IAAsB7F,YAAlE,SAAiF9B,EAAMiB,QACvF,cAAC,eAAD,CAAc3B,KAAK,eAEpBU,EAAMV,KAAO,cAAC,WAAD,CAAUA,KAAK,cAAiB,cAAC,aAAD,CAAYA,KAAK,UAAUkC,QA9ChD,WDIU,IAACuG,ECHxCpB,GDGwCoB,ECHH/H,EAAMgI,UDItC,CAAE1I,KAAMqF,EAA+B6C,QAASO,KCHrDpB,EAASF,gB,qCCsFAwB,GACX,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,SAAUpH,EAApB,EAAoBA,KAAMb,EAA1B,EAA0BA,QAA1B,OACA,SAACyG,GACCA,EA9DK,CAAErH,KAAM8F,IA+DbgD,MAAM,GAAD,OAAIC,GAAJ,kBAA8B,CACjCC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBR,MAAOA,EACPC,SAAUA,EACVpH,KAAMA,MAGP4H,MAAK,SAAAC,GACJ,OAAIA,EAAIC,GAAWD,EAAIE,OACXF,EAAIE,OAAOH,MAAK,SAAAI,GAAG,OAAIC,QAAQC,OAAOF,SAEnDJ,MAAK,SAAAC,GACAA,EAAIM,SACNvC,EA5ED,CAAErH,KAAM+F,IA6EPnF,EAAQiJ,KAAK,WACRH,QAAQC,OAAOL,MAEvBQ,OAAM,kBAAMzC,EA5EV,CAAErH,KAAMgG,SA+EJ+D,GACX,SAAC,GAAD,IAAGnB,EAAH,EAAGA,MAAOC,EAAV,EAAUA,SAAUjI,EAApB,EAAoBA,QAApB,OACA,SAACyG,GACCA,EA9EK,CAAErH,KAAMiG,IA+Eb6C,MAAM,GAAD,OAAIC,GAAJ,eAA2B,CAC9BC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBR,MAAOA,EACPC,SAAUA,MAGXQ,MAAK,SAAAC,GACJ,OAAIA,EAAIC,GAAWD,EAAIE,OACXF,EAAIE,OAAOH,MAAK,SAAAI,GAAG,OAAIC,QAAQC,OAAOF,SAEnDJ,MAAK,SAAAC,GACJ,GAAIA,EAAIM,QAAS,CACf,IAAMI,EAAcV,EAAIU,YAAYC,MAAM,WAAW,GACrDC,GAAW,cAAeF,GAC1BE,GAAW,eAAgBZ,EAAIa,cAC/B9C,GA/FY+C,EA+FUd,EAAIc,KA9F3B,CAAEpK,KAAMkG,EAAcgC,QAASkC,KA+F9BxJ,EAAQiJ,KAAK,UACRH,QAAQC,OAAOL,GAjGT,IAACc,KAmGfN,OAAM,kBAAMzC,EA9FV,CAAErH,KAAMmG,UAiGJkE,GAAU,WACrBtG,QAAQC,IAAI,WACZ,IAAMmG,EAAeG,GAAU,gBAC/B,OAAOxB,MAAM,GAAD,OAAIC,GAAJ,eAA2B,CACrCC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBmB,MAAM,GAAD,OAAKJ,OAEXd,MAAK,SAAAC,GACN,OAAIA,EAAIC,GAAWD,EAAIE,OACXF,EAAIE,OAAOH,MAAK,SAAAI,GAAG,OAAIC,QAAQC,OAAOF,UAIzCe,GAAmB,kBAAM,SAACnD,GACrC,IAAM8C,EAAeG,GAAU,gBAC/BjD,EAhHO,CAAErH,KAAMoG,KAiHf0C,MAAM,GAAD,OAAIC,GAAJ,gBAA4B,CAC/BC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBmB,MAAM,GAAD,OAAKJ,OAGXd,MAAK,SAAAC,GACJ,OAAIA,EAAIC,GAAWD,EAAIE,OACXF,EAAIE,OAAOH,MAAK,SAAAI,GAAG,OAAIC,QAAQC,OAAOF,SAEnDJ,MAAK,SAAAC,GACAA,EAAIM,SACNa,GAAc,eACdA,GAAc,gBACdpD,EA9HC,CAAErH,KAAMqG,MA+HJqD,QAAQC,OAAOL,MAEvBQ,OAAM,kBAAMzC,EA7HR,CAAErH,KAAMsG,UAgIJoE,GAAoB,kBAAM,SAACrD,GACtC,IAAM2C,EAAcM,GAAU,eAC9BjD,EA9HO,CAAErH,KAAMuG,KA+HfoE,GAAc,UAAU5B,GAAV,cAAgC,CAC5CE,QAAS,CACP,eAAgB,mBAChB2B,cAAc,UAAD,OAAYZ,MAG1BX,MAAK,SAAAC,GAlIa,IAACc,EAmIdd,EAAIM,QAASvC,GAnIC+C,EAmIuBd,EAAIc,KAlI1C,CAAEpK,KAAMwG,GAAkB0B,QAASkC,KAmIjCV,QAAQC,OAAOL,MAErBQ,OAAM,kBAAMzC,EAjIR,CAAErH,KAAMyG,UAoIJoE,GACX,SAAC,GAAD,IAAGjC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,SAAUpH,EAApB,EAAoBA,KAApB,OACA,SAAC4F,GACC,IAAM2C,EAAcM,GAAU,eAC9BjD,EApIK,CAAErH,KAAM0G,KAqIbiE,GAAc,UAAU5B,GAAV,cAAgC,CAC5CC,OAAQ,QACRC,QAAS,CACP,eAAgB,mBAChB2B,cAAc,UAAD,OAAYZ,IAE3Bd,KAAMC,KAAKC,UAAU,CACnBR,MAAOA,EACPC,SAAUA,EACVpH,KAAMA,MAGP4H,MAAK,SAAAC,GA9Ic,IAACc,EA+Ifd,EAAIM,QAASvC,GA/IE+C,EA+IyBd,EAAIc,KA9I/C,CAAEpK,KAAM2G,GAAqBuB,QAASkC,KA+IlCV,QAAQC,OAAOL,MAErBQ,OAAM,kBAAMzC,EA7IV,CAAErH,KAAM4G,UCjHJmC,GAAW,wCACX+B,GAAS,yCACTC,GACX,yJAUWT,GAAY,SAAC7I,GACxB,IAAMuJ,EAAUC,SAASC,OAAOC,MAAM,IAAIC,OAAO,WAAa3J,EAAKU,QAAQ,+BAAgC,QAAU,aACrH,OAAO6I,EAAUK,mBAAmBL,EAAQ,SAAMM,GAQvCpB,GAAa,SAACzI,EAAcoC,GAA0E,IAArBnD,EAAoB,uDAAP,GAMrG6K,GALJ7K,EAAK,cACH8K,KAAM,IACNC,QAAS,iCACN/K,IAEW+K,QAChB,GAAkB,iBAAPF,GAAmBA,EAAK,CACjC,IAAMG,EAAI,IAAIC,KACdD,EAAEE,QAAQF,EAAEG,UAAkB,IAANN,GACxBA,EAAM7K,EAAM+K,QAAUC,EAEpBH,GAAOA,EAAIO,cACbpL,EAAM+K,QAAUF,EAAIO,eAGtB,IAAIC,EAAgBtK,EAAO,KAD3BoC,EAAQmI,mBAAmBnI,IAE3B,IAAK,IAAMoI,KAAYvL,EAAO,CAC5BqL,GAAiB,KAAOE,EACxB,IAAMC,EAAYxL,EAAMuL,IACN,IAAdC,IACFH,GAAiB,IAAMG,GAG3BjB,SAASC,OAASa,GAGPtB,GAAgB,SAAChJ,GAC5ByI,GAAWzI,EAAM,KAAM,CAAEgK,SAAU,KAGxBd,GAAc,yCAAG,WAAmBwB,EAAkBC,GAArC,kBAAAC,EAAA,+EAEbvD,MAAMqD,EAAKC,GAAS/C,KAApB,yCAAyB,WAAMC,GAAN,gBAAA+C,EAAA,0DAChC/C,EAAIC,GAD4B,yCACjBD,EAAIE,QADa,uBAEjBF,EAAIE,OAFa,cAE9BC,EAF8B,gBAGvBC,QAAQC,OAAOF,GAHQ,mFAAzB,uDAFa,mFAQM,gBAA5B,KAAe6C,QARO,kCASIjC,KATJ,eASlBkC,EATkB,OAUlBvC,EAAcuC,EAAcvC,YAAaC,MAAM,WAAW,GAChEC,GAAW,cAAeF,GAC1BE,GAAW,eAAgBqC,EAAcpC,cACzCpG,QAAQC,IAAIuI,GACPH,EAASnD,UACZmD,EAASnD,QAAU,IAErBmD,EAASnD,QAAQ2B,cAAgBN,GAAU,eAjBnB,UAkBXxB,MAAMqD,EAAKC,GAAS/C,KAApB,yCAAyB,WAAMC,GAAN,gBAAA+C,EAAA,0DAChC/C,EAAIC,GAD4B,yCACjBD,EAAIE,QADa,uBAEjBF,EAAIE,OAFa,cAE9BC,EAF8B,gBAGvBC,QAAQC,OAAOF,GAHQ,mFAAzB,uDAlBW,4EAAH,wDA2Bd+C,GAAU,SAACC,GACtB,IAAMC,EAAc,IAAIf,KACxB,OAAIc,EAAKE,MAAM,EAAG,MAAQD,EAAYE,cAAcD,MAAM,EAAG,IAAW,+CAAN,OAAmBF,EAAKE,MAAM,GAAI,IAAlC,YAC7D,UAAUF,EAAKE,MAAM,EAAG,IAAxB,aAAgCF,EAAKE,MAAM,GAAI,IAA/C,aC9DME,GAAqB,SAAAC,GAAO,OAAI,SAACzF,GAC5C,IAAM2C,EAAcM,GAAU,eAC9BjD,EAbO,CAAErH,KAAM0F,IAcfiF,GAAc,UAAU5B,GAAV,WAA6B,CACzCC,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChB2B,cAAc,UAAD,OAAYZ,IAE3Bd,KAAMC,KAAKC,UAAU,CAAEvG,YAAaiK,MAEnCzD,MAAK,SAAAC,GAAG,OAAIjC,GAnBQ0F,EAmBiBzD,EAAI0D,MAAMD,OAlB3C,CAAE/M,KAAM2F,EAAmBuC,QAAS6E,KADrB,IAACA,KAoBpBjD,OAAM,kBAAMzC,EAfR,CAAErH,KAAM4F,SCiGFqH,GAjGW,SAACvM,GACzB,IAAM2G,EAAWpI,IACX2B,EAAUC,cAChB,EAAoD9B,GAAY,SAAA+B,GAAK,OAAIA,EAAMC,qBAAvEC,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,uBACjBiM,EAAWnO,GAAY,SAAA+B,GAAK,OAAIA,EAAMsJ,QAAtC8C,OACFC,EAAehM,mBAAQ,WAC3B,IAAIiM,EAAM,EAIV,OAHAnM,EAAuBK,SAAQ,SAAAC,GACX,QAAdA,EAAKvB,OAAgBoN,GAAO7L,EAAKI,UAEhCX,EAAkBoM,EAAM,EAAIpM,EAAgBW,MAAQyL,IAC1D,CAACpM,EAAiBC,IAUrB,EAA+BqG,YAAQ,CACrCC,OAAQ,aACR3F,QAAS,SAAAC,GAAO,MAAK,CACnBwL,QAASxL,EAAQyL,WAEnBC,KAAM,SAAChM,GACa,QAAdA,EAAKvB,KAAgBqH,ELFE,SAAC9F,GAChC,IAAMmH,EAAYlE,KAAKgJ,SAEvB,OADAjM,EAAKkH,IAAMC,EAAU+E,WACd,CAAEzN,KAAMwF,EAAqB0C,QAAS3G,GKDPmM,CAAkBnM,IAC/C8F,ELrB6B,SAAC9F,GACvC,IAAMmH,EAAYlE,KAAKgJ,SAEvB,OADAjM,EAAKkH,IAAMC,EAAU+E,WACd,CAAEzN,KAAMoF,EAA4B8C,QAAS3G,GKkBlCoM,CAAyBpM,IACnCP,GAAiC,QAAdO,EAAKvB,MAC1BqH,EAASF,MACTE,EAASH,OACJG,EAASH,SAXpB,mBAASmG,EAAT,KAASA,QAAWjF,EAApB,KAeA,OACE,sBAAK9I,UAAS,gBAAWyB,IAAkB2C,SAA3C,UACE,qBAAKxD,MAAO,CAAE0N,OAAO,GAAD,OAAKP,EAAU,oBAAsB,IAAMQ,aAAc,IAAMxL,IAAK+F,EAAxF,SACGpH,GAAmBC,EAAuB6M,OAAS,EAClD,gCACE,8BACG9M,EACC,cAAC,GAAD,CAEE0H,UAAW1H,EAAgByH,IAC3B/G,MAAOV,EAAgBU,MACvBD,KAAMT,EAAgBS,KACtBE,MAAOX,EAAgBW,MACvB3B,KAAK,WALAgB,EAAgByH,KAQvB,oBAAInJ,UAAU,6BAAd,+FAGJ,qBAAKA,UAAS,oBAAeyB,IAAkBgN,MAA/C,SACG9M,EAAuB8D,KAAI,SAACxD,EAAMmG,GAAP,OAC1B,cAAC,GAAD,CAAsCA,MAAOA,EAAOgB,UAAWnH,EAAKkH,IAAK/G,MAAOH,EAAKG,MAAOD,KAAMF,EAAKE,KAAME,MAAOJ,EAAKI,OAA7FJ,EAAKkH,UAGrC,qBAAKnJ,UAAU,OAAf,SACG0B,EACC,cAAC,GAAD,CAEE0H,UAAW1H,EAAgByH,IAC3B/G,MAAOV,EAAgBU,MACvBD,KAAMT,EAAgBS,KACtBE,MAAOX,EAAgBW,MACvB3B,KAAK,cALAgB,EAAgByH,KAQvB,oBAAInJ,UAAU,6BAAd,kGAKN,qBAAKY,MAAO,CAAE8N,OAAQ,OAAQC,QAAS,OAAQC,WAAY,SAAU/N,eAAgB,UAArF,SACE,oBAAIb,UAAS,4BAAb,6GAIN,sBAAKA,UAAS,UAAKyB,IAAkBoN,QAAvB,UAAd,UACE,sBAAK7O,UAAS,UAAKyB,IAAkBoM,aAAvB,UAAd,UACE,mBAAG7N,UAAS,0CAAqCyB,IAAkBqN,mBAAnE,SACGpN,GAAmBC,EAAuB6M,OAAS,EAAIX,EAAe,IAEzE,cAAC,eAAD,CAAcnN,KAAK,eAGrB,cAAC,SAAD,CAAQA,KAAK,UAAUqO,KAAK,SAASnM,QA5EvB,WAClB,IAAKgL,EAAQ,OAAOtM,EAAQuB,QAAQ,UACpC,IAAM2K,EAAU7L,EAAuB8D,KAAI,SAAAxD,GAAI,OAAIA,EAAKH,OACxDiG,EAASwF,GAAS,GAAD,mBAAKC,GAAL,CAAc9L,EAAiBI,QAChDV,EAAM4N,cACN5N,EAAM6N,eAuEyDC,UAAWxN,EAAtE,oG,qBC9FOyN,GARM,SAAC,GAAoD,IAAlDC,EAAiD,EAAjDA,SAAUC,EAAuC,EAAvCA,aAChC,OACE,qBAAKrP,UAAWsP,KAAaC,QAAS3M,QAAS,SAAA4M,GAAC,OAAIA,EAAEC,SAAWD,EAAEE,eAAiBL,KAApF,SACGD,K,oBCCDO,GAAgChE,SAASiE,eAAe,UA2B/CC,GAzBD,SAAC,GAAmD,IAAjDT,EAAgD,EAAhDA,SAAUC,EAAsC,EAAtCA,aACnBS,EAA4B,UAD6B,EAAxBpP,KACK,MAAQ,MAE9CqP,EAAgB,SAACP,GACV,WAAXA,EAAEQ,MAAqBX,KAQzB,OALAY,qBAAU,WAER,OADAtE,SAASuE,iBAAiB,UAAWH,GAC9B,kBAAMpE,SAASwE,oBAAoB,UAAWJ,MACpD,IAEIK,IAASC,aACd,cAAC,GAAD,CAAchB,aAAcA,EAA5B,SACE,sBAAKrP,UAAWsQ,KAAMA,MAAO1P,MAAO,CAAE8N,OAAO,GAAD,OAAKoB,IAAjD,UACE,qBAAK9P,UAAWsQ,KAAMC,UAAW3N,QAASyM,EAA1C,SACE,cAAC,YAAD,CAAW3O,KAAK,cAEjB0O,OAGLO,K,oBCQWa,GAtCW,WAAO,IAAD,EACxBnP,EAAWtB,cACT0Q,EAAOC,cAAPD,GACFpN,EAAO5D,GAAY,SAAA+B,GAAK,OAAIA,EAAM8B,kBAAkBC,eAClDoN,EAAsBlR,GAAY,SAAA+B,GAAK,OAAIA,EAAM8B,qBAAjDqN,kBACFC,EAAoB/O,mBAAQ,WAChC,OAAOwB,GAAQA,EAAKwN,MAAK,SAAA5O,GAAI,OAAIA,EAAKH,MAAQ2O,OAC7C,CAACpN,IAEJ,OAAKsN,EACIA,IAAsBC,EAA0B,cAAC,IAAD,CAAUtQ,GAAG,MAEpE,sBAAKN,UAAW8Q,KAAkBC,UAAWnQ,MAAO,CAAE8N,OAAO,GAAD,SAAK,UAAErN,EAAiBG,aAAnB,aAAC,EAAyBwP,aAAc,SAAzG,UACE,oBAAIhR,UAAS,kCAAb,qHACA,qBAAKgD,IAAG,OAAE4N,QAAF,IAAEA,OAAF,EAAEA,EAAmBlL,YAAazC,IAAI,kBAAkBjD,UAAW8Q,KAAkB1O,QAC7F,mBAAGpC,UAAS,kCAAZ,gBAAkD4Q,QAAlD,IAAkDA,OAAlD,EAAkDA,EAAmBzO,OACrE,sBAAKnC,UAAS,UAAK8Q,KAAkBG,WAAvB,SAAd,UACE,sBAAKjR,UAAW8Q,KAAkBI,SAAlC,UACE,mBAAGlR,UAAU,kDAAb,iFACA,mBAAGA,UAAU,kDAAb,gBAAgE4Q,QAAhE,IAAgEA,OAAhE,EAAgEA,EAAmBO,cAErF,sBAAKnR,UAAW8Q,KAAkBI,SAAlC,UACE,mBAAGlR,UAAU,kDAAb,oDACA,mBAAGA,UAAU,kDAAb,gBAAgE4Q,QAAhE,IAAgEA,OAAhE,EAAgEA,EAAmBQ,cAErF,sBAAKpR,UAAW8Q,KAAkBI,SAAlC,UACE,mBAAGlR,UAAU,kDAAb,8CACA,mBAAGA,UAAU,kDAAb,gBAAgE4Q,QAAhE,IAAgEA,OAAhE,EAAgEA,EAAmBS,SAErF,sBAAKrR,UAAW8Q,KAAkBI,SAAlC,UACE,mBAAGlR,UAAU,kDAAb,sEACA,mBAAGA,UAAU,kDAAb,gBAAgE4Q,QAAhE,IAAgEA,OAAhE,EAAgEA,EAAmBU,yBAtB5D,M,oBCdlB,OAA0B,iCC0B1BC,GArBM,WACnB,MAAsC9R,GAAY,SAAA+B,GAAK,OAAIA,EAAMkM,SAAzD8D,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,aACrB,OACE,mCACIA,EASA,qBAAKzR,UAAW0R,KAAaX,UAAWnQ,MAAO,CAAEC,eAAgB,UAAjE,SACE,oBAAIb,UAAU,4BAAd,mEATF,sBAAKA,UAAW0R,KAAaX,UAA7B,UACE,oBAAI/Q,UAAS,4CAAuC0R,KAAahE,OAAjE,SAA2E8D,IAC3E,mBAAGxR,UAAS,0CAAqC0R,KAAaC,aAA9D,iIACA,qBAAK3O,IAAK4O,GAAU3O,IAAI,YAAYjD,UAAU,QAAQY,MAAO,CAAEiR,MAAO,IAAKnD,OAAQ,OACnF,mBAAG1O,UAAS,oCAAZ,qJACA,mBAAGA,UAAS,uDAAZ,kQ,oBCWG8R,GAAiC,kBAAM,SAAC/J,GACnDA,EAZO,CAAErH,KAAMiF,IAaf6D,MAAM,GAAD,OAAIC,GAAJ,iBACFM,MAAK,SAAAC,GACJ,OAAIA,EAAIC,GAAWD,EAAIE,OACXE,QAAQC,YAErBN,MAAK,SAAAC,GAAG,OAAIjC,GAfoB1E,EAeiB2G,EAAI3G,KAdjD,CAAE3C,KAAMkF,EAAgCgD,QAASvF,KADtB,IAACA,KAgBhCmH,OAAM,kBAAMzC,EAXR,CAAErH,KAAMmF,S,oBChBJkM,GAAQ,WAAO,IAAD,EACnBzQ,EAAUC,cACVF,EAAWtB,cACXgI,EAAWpI,IACjB,EAAmCF,GAAY,SAAA+B,GAAK,OAAIA,EAAMsJ,QAAtD8C,EAAR,EAAQA,OAAQoE,EAAhB,EAAgBA,eAChB,EAA0BnO,mBAAS,IAAnC,mBAAOyF,EAAP,KAAc2I,EAAd,KACA,EAAgCpO,mBAAS,IAAzC,mBAAO0F,EAAP,KAAiB2I,EAAjB,KAEMC,EAAW,SAAC3C,GAChB,IAAMC,EAASD,EAAEC,OACD,UAAhBA,EAAOtN,KAAmB8P,EAASxC,EAAOlL,OAAS2N,EAAYzC,EAAOlL,QAQxE,OAAIyN,EAAuB,MACjBA,GAAkBpE,EAAe,cAAC,IAAD,CAAUtN,IAAI,UAACe,EAAiBG,aAAlB,eAAyB4Q,OAAQ,aAGxF,sBAAMpS,UAAWqS,KAAYC,QAA7B,SACE,sBAAKtS,UAAWqS,KAAYjO,QAA5B,UACE,uBAAMmO,SAXK,SAAC/C,GAChBA,EAAEgD,iBACFzK,EAAS0C,GAAM,CAAEnB,MAAOA,EAAOC,SAAUA,EAAUjI,QAASA,MAS9BmR,YAAU,EAACzS,UAAWqS,KAAYK,KAA5D,UACE,oBAAI1S,UAAU,4BAAd,sCACA,cAAC,aAAD,CAAYmC,KAAK,QAAQoC,MAAO+E,GAAS,GAAI6I,SAAUA,IACvD,cAAC,gBAAD,CAAehQ,KAAK,WAAWoC,MAAOgF,GAAY,GAAI4I,SAAUA,IAEhE,cAAC,SAAD,CAAQzR,KAAK,UAAUqO,KAAK,SAASG,UAAW5F,IAAUC,EAA1D,yCAIF,gCACE,sBAAKvJ,UAAU,kDAAf,UACE,mKACA,cAAC,IAAD,CAAMM,GAAG,YAAYN,UAAS,UAAKqS,KAAYM,KAAjB,SAA9B,6HAIF,sBAAK3S,UAAU,kDAAf,UACE,8GACA,cAAC,IAAD,CAAMM,GAAG,mBAAmBN,UAAS,UAAKqS,KAAYM,KAAjB,SAArC,uI,oBCzCCC,GAAW,WAAO,IAAD,EACtB7K,EAAWpI,IACjB,EAAmEF,GAAY,SAAA+B,GAAK,OAAIA,EAAMsJ,QAAhF8C,GAAd,EAAQ9C,KAAR,EAAc8C,QAAQoE,EAAtB,EAAsBA,eAAgBa,EAAtC,EAAsCA,UAAWC,EAAjD,EAAiDA,cAC3CxR,EAAUC,cACVF,EAAWtB,cACjB,EAAgC8D,mBAAS,IAAzC,mBAAOkP,EAAP,KAAiBC,EAAjB,KACA,EAA0BnP,mBAAS,IAAnC,mBAAOyF,EAAP,KAAc2I,EAAd,KACA,EAAgCpO,mBAAS,IAAzC,mBAAO0F,EAAP,KAAiB2I,EAAjB,KACA,EAAoCrO,oBAAS,GAA7C,mBAAOoP,EAAP,KAAmBC,EAAnB,KAEMf,EAAW,SAAC3C,GAChB,IAAMC,EAASD,EAAEC,OACD,UAAhBA,EAAOtN,KAAmB8P,EAASxC,EAAOlL,OAAyB,aAAhBkL,EAAOtN,KAAsB6Q,EAAYvD,EAAOlL,OAAS2N,EAAYzC,EAAOlL,QAUjI,OAFA0L,qBAAU,kBAAO3G,EAAMkF,OAAS,IAAMlF,EAAMuC,MAAMJ,IAAcyH,GAAc,GAAQA,GAAc,KAAS,CAAC5J,IAE1G0I,EAAuB,MACjBA,GAAkBpE,EAAe,cAAC,IAAD,CAAUtN,IAAI,UAACe,EAAiBG,aAAlB,eAAyB4Q,OAAQ,aAGxF,sBAAMpS,UAAWmT,KAAeb,QAAhC,SACE,sBAAKtS,UAAWmT,KAAe/O,QAA/B,UACE,uBAAMmO,SAbK,SAAC/C,GAChBA,EAAEgD,iBACFzK,EAASsB,GAAS,CAAEC,MAAOA,EAAOnH,KAAM4Q,EAAUxJ,SAAUA,EAAUjI,QAASA,MAWjDmR,YAAU,EAACzS,UAAWmT,KAAeT,KAA/D,UACE,oBAAI1S,UAAU,4BAAd,gFACA,cAAC,QAAD,CAAOU,KAAK,OAAO0S,YAAY,qBAAMjR,KAAK,WAAWoC,MAAOwO,GAAY,GAAIZ,SAAUA,IACtF,cAAC,QAAD,CACEzR,KAAK,QACL0S,YAAY,SACZjR,KAAK,QACLoC,MAAO+E,GAAS,GAChB6I,SAAUA,EACVkB,MAAOJ,EACPJ,UAAW,mFAEb,cAAC,gBAAD,CAAe1Q,KAAK,WAAWoC,MAAOgF,GAAY,GAAI4I,SAAUA,IAEhE,cAAC,SAAD,CAAQzR,KAAK,UAAUqO,KAAK,SAASG,UAAW5F,GAAS2J,IAAe1J,IAAawJ,GAAYD,EAAjG,0HAGA,mBAAG9S,UAAU,iCAAiCY,MAAO,CAAE0S,MAAO,OAA9D,SACiB,+HAAdT,GAA0CA,OAG/C,8BACE,sBAAK7S,UAAU,kDAAf,UACE,wJACA,cAAC,IAAD,CAAMM,GAAG,SAASN,UAAS,UAAKmT,KAAeR,KAApB,SAA3B,uD,oBCrDCY,GAAiB,WAAO,IAAD,EAC5BjS,EAAUC,cACVF,EAAWtB,cACjB,EAAmCN,GAAY,SAAA+B,GAAK,OAAIA,EAAMsJ,QAAtD8C,EAAR,EAAQA,OAAQoE,EAAhB,EAAgBA,eAChB,EAA0BnO,mBAAS,IAAnC,mBAAOyF,EAAP,KAAc2I,EAAd,KACA,EAAoCpO,oBAAS,GAA7C,mBAAOoP,EAAP,KAAmBC,EAAnB,KA+BA,OAHAjD,qBAAU,kBAAO3O,EAAgBuB,QAAQ,CAAE2Q,mBAAmB,MAAU,IACxEvD,qBAAU,kBAAO3G,EAAMkF,OAAS,IAAMlF,EAAMuC,MAAMJ,IAAcyH,GAAc,GAAQA,GAAc,KAAS,CAAC5J,IAE1G0I,EAAuB,MACjBA,GAAkBpE,EAAe,cAAC,IAAD,CAAUtN,IAAI,UAACe,EAAiBG,aAAlB,eAAyB4Q,OAAQ,aAGxF,sBAAMpS,UAAWyT,KAAenB,QAAhC,SACE,sBAAKtS,UAAWyT,KAAerP,QAA/B,UACE,uBAAMmO,SA7BK,SAAC/C,GAChBA,EAAEgD,iBACFhJ,MAAM,GAAD,OAAIC,GAAJ,mBAA+B,CAClCC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAER,MAAOA,MAE7BS,MAAK,SAAAC,GACJ,GAAIA,EAAIC,GAAI,OAAOD,EAAIE,OAClBgJ,GAAc,MAEpBnJ,MAAK,SAAAC,GACAA,EAAIM,QAAShJ,EAAQuB,QAAQ,kBAAmB,CAAE2Q,mBAAmB,IACpEN,GAAc,MAEpB1I,OAAM,kBAAM0I,GAAc,OAYCT,YAAU,EAACzS,UAAWyT,KAAef,KAA/D,UACE,oBAAI1S,UAAU,4BAAd,uIACA,cAAC,QAAD,CACEU,KAAK,QACL0S,YAAY,oDACZjR,KAAK,QACLoC,MAAO+E,GAAS,GAChB6I,SAzCO,SAAC3C,GAChB,IAAMC,EAASD,EAAEC,OACD,UAAhBA,EAAOtN,MAAoB8P,EAASxC,EAAOlL,QAwCnC8O,MAAOJ,EACPJ,UA7CQ,mFAgDV,cAAC,SAAD,CAAQnS,KAAK,UAAUqO,KAAK,SAASG,UAAW5F,GAAS2J,EAAzD,yFAIF,8BACE,sBAAKjT,UAAU,kDAAf,UACE,gIACA,cAAC,IAAD,CAAMM,GAAG,SAASN,UAAS,UAAKyT,KAAed,KAApB,SAA3B,uD,oBC7DCe,GAAgB,WAAO,IAAD,EA4CG,EA3C9BpS,EAAUC,cACVF,EAAWtB,cACjB,EAAmCN,GAAY,SAAA+B,GAAK,OAAIA,EAAMsJ,QAAtD8C,EAAR,EAAQA,OAAQoE,EAAhB,EAAgBA,eAChB,EAAwCnO,oBAAS,GAAjD,mBAAO8P,EAAP,KAAqBC,EAArB,KACA,EAAwB/P,mBAAS,IAAjC,mBAAOmM,EAAP,KAAa6D,EAAb,KACA,EAAgChQ,mBAAS,IAAzC,mBAAO0F,EAAP,KAAiB2I,EAAjB,KACM4B,EAAcrQ,iBAAyB,MAEvC0O,EAAW,SAAC3C,GAChB,IAAMC,EAASD,EAAEC,OACD,SAAhBA,EAAOtN,KAAkB0R,EAAQpE,EAAOlL,OAAS2N,EAAYzC,EAAOlL,QAGhEwP,EAAc,WAClBH,GAAiBD,GACZA,GAAcK,YAAW,kCAAMF,EAAYhP,eAAlB,aAAM,EAAqBmP,UAAS,IA2BpE,OAAIjC,EAAuB,MACjBA,GAAkBpE,EACnB,cAAC,IAAD,CAAUtN,IAAI,UAACe,EAAiBG,aAAlB,eAAyB4Q,OAAQ,cAC7C,UAAE/Q,EAAiBG,aAAnB,aAAC,EAAyBgS,mBAGnC,sBAAMxT,UAAWkU,KAAc5B,QAAS1P,QA9BP,SAAC4M,GAC9BmE,GAAoD,mCAApCnE,EAAEE,cAAcyE,UAAU5P,OAA4CqP,GAAiBD,IA6B3G,SACE,sBAAK3T,UAAWkU,KAAc9P,QAA9B,UACE,uBAAMmO,SA5BK,SAAC/C,GAChBA,EAAEgD,iBACFhJ,MAAM,GAAD,OAAIC,GAAJ,yBAAqC,CACxCC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAEP,SAAUA,EAAU0B,MAAO+E,MAEjDjG,MAAK,SAAAC,GACJ,GAAIA,EAAIC,GAAI,OAAOD,EAAIE,OAClBkK,MAAM,YAEZrK,MAAK,SAAAC,GACAA,EAAIM,QAAShJ,EAAQuB,QAAQ,SAAU,CAAE2Q,mBAAmB,IAC3DY,MAAM,YAEZ5J,OAAM,SAAAL,GAAG,OAAIiK,MAAMjK,OAWQsI,YAAU,EAACzS,UAAWkU,KAAcxB,KAA9D,UACE,oBAAI1S,UAAU,4BAAd,uIACA,qBAAKA,UAAW2T,EAAeO,KAAcG,UAAY,GAAzD,SACE,cAAC,QAAD,CACE3T,KAAK,WACL0S,YAAY,iHACZjR,KAAK,WACLoC,MAAOgF,GAAY,GACnB+K,KAAK,WACLnC,SAAUA,EACV4B,YAAaA,MAIjB,qBAAK/T,UAAY2T,EAAyC,GAA1BO,KAAcG,UAA9C,SACE,cAAC,QAAD,CACE3T,KAAK,OACL0S,YAAY,iHACZjR,KAAK,WACLoC,MAAOgF,GAAY,GACnB+K,KAAK,WACLnC,SAAUA,EACV4B,YAAaA,EACbhR,IAAK+Q,MAGT,cAAC,QAAD,CAAOpT,KAAK,OAAO0S,YAAY,kHAAwBjR,KAAK,OAAOoC,MAAOyL,GAAQ,GAAImC,SAAUA,IAEhG,cAAC,SAAD,CAAQzR,KAAK,UAAUqO,KAAK,SAASG,UAAW3F,IAAayG,EAA7D,yFAIF,8BACE,sBAAKhQ,UAAU,kDAAf,UACE,gIACA,cAAC,IAAD,CAAMM,GAAG,SAASN,UAAS,UAAKkU,KAAcvB,KAAnB,SAA3B,sDAxCqD,cAAC,IAAD,CAAUrS,GAAI,sB,oBCjDlEiU,GAAgB,SAAC,GAAiF,IAA/EhQ,EAA8E,EAA9EA,MAAO4N,EAAuE,EAAvEA,SAAUhQ,EAA6D,EAA7DA,KAAMiR,EAAuD,EAAvDA,YAAuD,IAA1CrE,YAA0C,MAAnC,UAAmC,EAC5G,EAAqClL,oBAAS,GAA9C,mBAAO2Q,EAAP,KAAsBC,EAAtB,KACA,EAA8B5Q,oBAAS,GAAvC,mBAAO6Q,EAAP,KAAgBC,EAAhB,KACA,EAA0B9Q,oBAAS,GAAnC,mBAAOwP,EAAP,KAAcuB,EAAd,KACMC,EAAWpR,iBAAyB,MA0B1C,OACE,cAAC,QAAD,CACE/C,KAAMgU,EAAU,OAAS,WACzBtB,YAAaA,EACbjB,SAAUA,EACVmC,KAAMI,EAAU,YAAc,WAC9BnQ,MAAOA,EACPxB,IAAK8R,EACLC,OAlBW,SAACtF,IACd,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAGC,OAAOlL,OATM,SAACA,GACrBqQ,EAASrQ,EAAMiK,OAAS,GAStBuG,CAAcvF,EAAEC,OAAOlL,OAEvBqQ,GAAS,GAEXH,GAAY,GACZE,GAAW,IAYTK,QAvBY,WACdJ,GAAS,IAuBPzS,KAAMA,EACNkR,MAAOA,EACPU,YApCgB,WAClBU,GAAY,GACZE,GAAW,GACXX,YAAW,kCAAMa,EAAS/P,eAAf,aAAM,EAAkBmP,UAAS,IAkC1CpB,UAAW,gHACX9D,KAAMA,EACNG,SAAUsF,KCxCHS,GAAa,SAAC,GAAiF,IAA/E1Q,EAA8E,EAA9EA,MAAO4N,EAAuE,EAAvEA,SAAUhQ,EAA6D,EAA7DA,KAAMiR,EAAuD,EAAvDA,YAAuD,IAA1CrE,YAA0C,MAAnC,UAAmC,EACzG,EAAqClL,oBAAS,GAA9C,mBAAO2Q,EAAP,KAAsBC,EAAtB,KACA,EAA0B5Q,oBAAS,GAAnC,mBAAOwP,EAAP,KAAcuB,EAAd,KACMC,EAAWpR,iBAAyB,MAwB1C,OACE,cAAC,QAAD,CACE/C,KAAK,QACL0S,YAAaA,EACbjB,SAAUA,EACVmC,KAAOE,EAA8B,WAAd,YACvBjQ,MAAOA,EACPxB,IAAK8R,EACLC,OAjBW,SAACtF,IACd,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAGC,OAAOlL,OATM,SAACA,GACrBqQ,GAfS,6BACDM,KAcgB3Q,IAStBwQ,CAAcvF,EAAEC,OAAOlL,OAEvBqQ,GAAS,GAEXH,GAAY,IAYVO,QAtBY,WACdJ,GAAS,IAsBPzS,KAAMA,EACNkR,MAAOA,EACPnE,SAAUsF,EACVT,YAnCgB,WAClBU,GAAY,GACZT,YAAW,kCAAMa,EAAS/P,eAAf,aAAM,EAAkBmP,UAAS,IAkC1CpB,UAAW,6GACX9D,KAAMA,KC/CCoG,GAAY,SAAC,GAAiF,IAA/E5Q,EAA8E,EAA9EA,MAAO4N,EAAuE,EAAvEA,SAAUhQ,EAA6D,EAA7DA,KAAMiR,EAAuD,EAAvDA,YAAuD,IAA1CrE,YAA0C,MAAnC,UAAmC,EACxG,EAAqClL,oBAAS,GAA9C,mBAAO2Q,EAAP,KAAsBC,EAAtB,KACA,EAA0B5Q,oBAAS,GAAnC,mBAAOwP,EAAP,KAAcuB,EAAd,KACMC,EAAWpR,iBAAyB,MAe1C,OACE,cAAC,QAAD,CACE/C,KAAK,OACL0S,YAAaA,EACbjB,SAAUA,EACVmC,KAAOE,EAA8B,WAAd,YACvBjQ,MAAOA,EACPxB,IAAK8R,EACLC,OAZW,WACbL,GAAY,IAYVO,QAjBY,WACdJ,GAAS,IAiBPzS,KAAMA,EACNkR,MAAOA,EACPnE,SAAUsF,EACVT,YA1BgB,WAClBU,GAAY,GACZT,YAAW,kCAAMa,EAAS/P,eAAf,aAAM,EAAkBmP,UAAS,IAyB1CpB,UAAW,6GACX9D,KAAMA,K,oBCrCG,OAA0B,wCCS5BqG,GAAY,SAAChU,GACxB,IAAME,EAAUC,cACVF,EAAWtB,cACTwD,EAAgB9D,GAAY,SAAA+B,GAAK,OAAIA,EAAM8B,qBAA3CC,YACF8R,EAAWxT,mBAAQ,WACvB,IAAIiM,EAAM,EACJwH,EAAOlU,EAAMmC,YAMnB,OALAA,EAAavB,SAAQ,SAAAC,GACnB,IAAK,IAAIsT,EAAI,EAAGA,EAAID,EAAK9G,OAAQ+G,IAC3BtT,EAAKH,MAAQwT,EAAKC,KAAIzH,GAAO7L,EAAKI,UAGnCyL,IACN,CAACvK,EAAanC,EAAMmC,cAQvB,OACE,sBAAKvD,UAAWwV,KAAUC,KAAM7S,QAPd,WACQ,UAAtBvB,EAASvB,UAAsBwB,EAAQuB,QAAQ,CAAE/C,SAAS,SAAD,OAAWsB,EAAMU,KAAON,MAAO,CAAEkU,kBAAmBrU,KACvF,oBAAtBA,EAASvB,UACXwB,EAAQuB,QAAQ,CAAE/C,SAAS,mBAAD,OAAqBsB,EAAMU,KAAON,MAAO,CAAEmU,qBAAsBtU,MAI7F,UACE,sBAAKrB,UAAWwV,KAAUI,WAA1B,UACE,mBAAG5V,UAAU,6BAAb,oBAA+CoB,EAAMqM,UACrD,mBAAGzN,UAAU,gDAAb,SAA8DkN,GAAQ9L,EAAMyU,gBAE9E,mBAAG7V,UAAU,6BAAb,SAA2CoB,EAAMe,OAC1B,oBAAtBd,EAASvB,UACR,mBAAGE,UAAU,4BAA4BY,MAAO,CAAE0S,MAAM,GAAD,OAAsB,SAAjBlS,EAAM0U,QAAqB,YAAvF,SACG1U,EAAM0U,SAGX,sBAAK9V,UAAWwV,KAAUO,YAA1B,UACE,qBAAK/S,IAAKgT,GAAW/S,IAAI,cACzB,sBAAKjD,UAAWwV,KAAUS,KAA1B,UACE,mBAAGjW,UAAU,kCAAb,SAAgDqV,IAChD,cAAC,eAAD,CAAc3U,KAAK,sBCjChBwV,GAAU,WACrB,IAAM5U,EAAUC,cACVwG,EAAWpI,IACX+K,EAAcM,GAAU,eACxBF,EAAOrL,GAAY,SAAA+B,GAAK,OAAIA,EAAMsJ,QAChCqL,EAAW1W,GAAY,SAAA+B,GAAK,OAAIA,EAAM2U,UAAtCA,OACR,EAA0BtS,mBAAS,IAAnC,mBAAOyF,EAAP,KAAc2I,EAAd,KACA,EAAwBpO,mBAAS,IAAjC,mBAAO1B,EAAP,KAAaiU,EAAb,KACA,EAAgCvS,mBAAS,cAAzC,mBAAO0F,EAAP,KAAiB2I,EAAjB,KAEMC,EAAW,SAAC3C,GAChB,IAAMC,EAASD,EAAEC,OACD,UAAhBA,EAAOtN,KAAmB8P,EAASxC,EAAOlL,OAAyB,SAAhBkL,EAAOtN,KAAkBiU,EAAQ3G,EAAOlL,OAAS2N,EAAYzC,EAAOlL,QA8BzH,OAZA0L,qBAAU,WAER,OADAlI,EAAS,CAAErH,KAAM6G,GAAqBqB,QAAQ,GAAD,OAAK4C,GAAL,sBAAyBd,KAC/D,WACL3C,EAAS,CAAErH,KAAMgH,QAElB,CAACgD,EAAa3C,IAEjBkI,qBAAU,WACRgC,EAASnH,EAAKA,KAAMxB,OACpB8M,EAAQtL,EAAKA,KAAM3I,QAClB,CAAC2I,EAAKA,OAGP,sBAAM9K,UAAWqW,KAAQlS,KAAzB,SACE,sBAAKnE,UAAWqW,KAAQjS,QAAxB,UACE,sBAAKpE,UAAS,UAAKqW,KAAQC,WAA3B,UACE,sBAAKtW,UAAWqW,KAAQE,OAAxB,UACE,cAAC,IAAD,CAASlW,OAAK,EAACC,GAAG,WAAWN,UAAS,oCAA+BqW,KAAQG,QAAvC,cAA4DhW,gBAAiB6V,KAAQI,cAA3H,wDAGA,cAAC,IAAD,CACEnW,GAAG,kBACHN,UAAS,oCAA+BqW,KAAQG,QAAvC,cACThW,gBAAiB6V,KAAQI,cAH3B,mGAMA,cAAC,IAAD,CACEnW,GAAG,gBACHN,UAAS,oCAA+BqW,KAAQG,QAAvC,cACThW,gBAAiB6V,KAAQI,cACzB7T,QAvCM,WAChBmF,EAASmD,MACT5J,EAAQuB,QAAQ,WAiCR,+CAQF,mBAAG7C,UAAS,wDAAmDqW,KAAQ1V,SAAvE,qUAIF,eAAC,IAAD,WACE,cAAC,IAAD,CAAOuL,KAAK,WAAW7L,OAAK,EAA5B,SACE,qBAAKL,UAAWqW,KAAQK,cAAxB,SACE,sBAAK1W,UAAWqW,KAAQM,YAAxB,UACE,cAAC,GAAD,CAAWvD,YAAY,qBAAMjR,KAAK,OAAOoC,MAAOpC,EAAMgQ,SAAUA,IAChE,cAAC,GAAD,CAAYiB,YAAY,iCAAQjR,KAAK,QAAQoC,MAAO+E,EAAO6I,SAAUA,IACrE,cAAC,GAAD,CAAeiB,YAAY,uCAASjR,KAAK,WAAWoC,MAAOgF,EAAU4I,SAAUA,IAC/E,sBAAKvR,MAAO,CAAEiR,MAAO,OAAQlD,QAAS,OAAQC,WAAY,SAAU/N,eAAgB,YAApF,UACE,cAAC,SAAD,CAAQkO,KAAK,SAASrO,KAAK,YAAYkC,QA7DnC,WAClBqP,EAASnH,EAAKA,KAAMxB,OACpB8M,EAAQtL,EAAKA,KAAM3I,MACnB+P,EAAY,eA0DE,kDAGA,cAAC,SAAD,CAAQnD,KAAK,SAASrO,KAAK,UAAUkC,QArDhC,WACf0G,IAAUwB,EAAKA,KAAMxB,OAASnH,IAAS2I,EAAKA,KAAM3I,MAAM4F,EAASwD,GAAW,CAAEjC,MAAOA,EAAOnH,KAAMA,EAAMoH,SAAUA,MAoDxG,8EAOR,cAAC,IAAD,CAAO2C,KAAK,kBAAZ,SACE,qBAAKtL,MAAO,CAAEiR,MAAO,OAArB,SACE,qBAAK7R,UAAWqW,KAAQO,WAAxB,SACGT,EAAO1Q,KAAI,SAAAiI,GAAK,OACf,cAAC,GAAD,CAEE5L,IAAK4L,EAAM5L,IACX+T,UAAWnI,EAAMmI,UACjBgB,UAAWnJ,EAAMmJ,UACjBf,OAAQpI,EAAMoI,OACdrI,OAAQC,EAAMD,OACdtL,KAAMuL,EAAMvL,KACZoB,YAAamK,EAAMnK,aAPdmK,EAAM5L,uB,oBCjGlBgV,GAAO,WAClB,IAAM/O,EAAWpI,IACjB,EAAsCF,GAAY,SAAA+B,GAAK,OAAIA,EAAM2U,UAAzDY,EAAR,EAAQA,MAAOC,EAAf,EAAeA,WAAYb,EAA3B,EAA2BA,OAErBc,EAAapV,mBAAQ,WACzB,OAAOsU,EAAOlS,QAAO,SAAAhC,GAAI,MAAoB,SAAhBA,EAAK6T,UAAmBzI,MAAM,EAAG,KAC7D,CAAC8I,IAEEe,EAAgBrV,mBAAQ,WAC5B,OAAOsU,EAAOlS,QAAO,SAAAhC,GAAI,MAAoB,YAAhBA,EAAK6T,UAAsBzI,MAAM,EAAG,MAChE,CAAC8I,IASJ,OAPAlG,qBAAU,WAER,OADAlI,EAAS,CAAErH,KAAM6G,GAAqBqB,QAAQ,GAAD,OAAK4C,GAAL,UACtC,WACLzD,EAAS,CAAErH,KAAMgH,QAElB,IAGD,sBAAK1H,UAAWmX,KAAKhT,KAArB,UACE,qBAAKvD,MAAO,CAAEiR,MAAO,OAArB,SACE,mBAAG7R,UAAU,6BAAb,yFAEF,sBAAKA,UAAWmX,KAAK/S,QAArB,UACE,qBAAKpE,UAAWmX,KAAKA,KAArB,SACE,qBAAKnX,UAAWmX,KAAKP,WAArB,SACGT,EAAO1Q,KAAI,SAAAiI,GAAK,OACf,cAAC,GAAD,CAEE5L,IAAK4L,EAAM5L,IACX+T,UAAWnI,EAAMmI,UACjBgB,UAAWnJ,EAAMmJ,UACjBf,OAAQpI,EAAMoI,OACdrI,OAAQC,EAAMD,OACdtL,KAAMuL,EAAMvL,KACZoB,YAAamK,EAAMnK,aAPdmK,EAAM5L,YAYnB,sBAAK9B,UAAWmX,KAAKhB,OAArB,UACE,sBAAKnW,UAAWmX,KAAKC,cAArB,UACE,sBAAKpX,UAAWmX,KAAKE,YAArB,UACE,mBAAGrX,UAAU,6BAAb,mDACA,8BACGiX,EAAWxR,KAAI,SAAAxD,GAAI,OAClB,mBAAuBjC,UAAS,wCAAmCmX,KAAKG,gBAAxE,SACGrV,EAAKwL,QADAvI,KAAKgJ,kBAMnB,sBAAKlO,UAAWmX,KAAKI,aAArB,UACE,mBAAGvX,UAAU,6BAAb,0DACA,8BACGkX,EAAczR,KAAI,SAAAxD,GAAI,OACrB,mBAAuBjC,UAAU,gCAAjC,SACGiC,EAAKwL,QADAvI,KAAKgJ,qBAOrB,gCACE,mBAAGlO,UAAU,6BAAb,oIACA,mBAAGA,UAAS,sCAAiCmX,KAAKK,aAAlD,SAAkET,OAEpE,gCACE,mBAAG/W,UAAU,6BAAb,6HACA,mBAAGA,UAAS,sCAAiCmX,KAAKK,aAAlD,SAAkER,iB,0BCpEjES,GAAiB,SAAC,GAAiD,IAA/CrI,EAA8C,EAA9CA,SAAasI,EAAiC,mBAC7E,EAAmCjY,GAAY,SAAA+B,GAAK,OAAIA,EAAMsJ,QAAtD8C,EAAR,EAAQA,OAER,OAFA,EAAgBoE,eAEW,KACpB,cAAC,IAAD,6BAAW0F,GAAX,IAAiBC,OAAQ,gBAAGtW,EAAH,EAAGA,SAAH,OAAmBuM,EAASwB,EAAW,cAAC,IAAD,CAAU9O,GAAI,CAAER,SAAU,SAAU0B,MAAO,CAAE4Q,KAAM/Q,OAAmBhB,OAAK,M,qBCJvIuX,GAAc,WAAO,IAAD,IACzBvW,EAAWtB,cACT0Q,EAAOC,cAAPD,GACF1I,EAAWpI,IACX+V,EAAiB,UAAGrU,EAASG,aAAZ,aAAG,EAAgBkU,kBACpCC,EAAoB,UAAGtU,EAASG,aAAZ,aAAG,EAAgBmU,qBACrCQ,EAAW1W,GAAY,SAAA+B,GAAK,OAAIA,EAAM2U,UAAtCA,OACA5S,EAAgB9D,GAAY,SAAA+B,GAAK,OAAIA,EAAM8B,qBAA3CC,YAEFmK,EAAQ7L,mBAAQ,WACpB,OAAOsU,EAAOtF,MAAK,SAAA5O,GAAI,OAAIA,EAAKH,MAAQ2O,OACvC,CAACA,EAAI0F,IAYF0B,EAVkB,SAACtU,GACvB,IAAIuU,EAAuC,GAM3C,OALK,OAALpK,QAAK,IAALA,KAAOnK,YAAYkC,KAAI,SAAAxD,GACrBsB,EAAavB,SAAQ,SAAAd,GACfA,EAAQY,MAAQG,GAAM6V,EAAOvN,KAAKrJ,SAGnC4W,EAGkBC,CAAgBxU,GACrCyU,EAAanW,mBAAQ,WACzB,IAAIQ,EAAgB,EAEpB,OADAwV,EAAmB7V,SAAQ,SAAAC,GAAI,OAAKI,GAASJ,EAAKI,SAC3CA,IACN,CAACwV,IASJ,OAPA5H,qBAAU,WAER,OADK5O,EAASG,OAAOuG,EAAS,CAAErH,KAAM6G,GAAqBqB,QAAQ,GAAD,OAAK4C,GAAL,UAC3D,WACAnK,EAASG,OAAOuG,EAAS,CAAErH,KAAMgH,QAEvC,IAEEgG,EAEH,qBAAK9M,MAAO,CAAEiR,MAAO,OAAQnD,OAAQ,OAAQC,QAAS,OAAQsJ,cAAe,SAAUpX,eAAgB,SAAU+N,WAAY,UAA7H,SACE,sBACEhO,MAAO,CACLiR,MAAM,GAAD,OAAK6D,GAAqBC,EAAuB,MAAQ,OAC9DjH,OAAQ,OACRC,QAAS,OACTsJ,cAAe,SACfpX,eAAgB,iBANpB,UAQE,mBAAGb,UAAU,gCAAgCY,MAAO,CAAEsX,UAAW,UAAjE,2BAAkFxK,QAAlF,IAAkFA,OAAlF,EAAkFA,EAAOD,UACzF,gCACE,mBAAGzN,UAAU,6BAAb,gBAA2C0N,QAA3C,IAA2CA,OAA3C,EAA2CA,EAAOvL,OAClD,mBAAGnC,UAAU,4BAA4BY,MAAO,CAAE0S,MAAO,WAAzD,gBACG5F,QADH,IACGA,OADH,EACGA,EAAOoI,YAGZ,mBAAG9V,UAAU,6BAAb,mDACA,qBAAKA,UAAWmY,KAAY1J,KAA5B,SACGoJ,EAAmBpS,KAAI,SAAAxD,GAAI,OAC1B,sBAAoCrB,MAAO,CAAEiR,MAAO,MAAOlD,QAAS,OAAQC,WAAY,SAAU/N,eAAgB,iBAAlH,UACE,sBAAKD,MAAO,CAAE+N,QAAS,OAAQC,WAAY,UAA3C,UACE,qBAAK5L,IAAKf,EAAKmW,aAAcnV,IAAI,iBAAiBrC,MAAO,CAAEiR,MAAO,GAAInD,OAAQ,MAC9E,sBAAM1O,UAAU,4BAAhB,SAA6CiC,EAAKE,UAEpD,sBAAKvB,MAAO,CAAE+N,QAAS,OAAQC,WAAY,UAA3C,UACE,mBAAG5O,UAAS,kCAAZ,SAAkDiC,EAAKI,QACvD,cAAC,eAAD,CAAc3B,KAAK,iBAPbuB,EAAKH,IAAMoD,KAAKgJ,eAY9B,sBAAKtN,MAAO,CAAEiR,MAAO,OAAQlD,QAAS,OAAQ9N,eAAgB,gBAAiB+N,WAAY,UAA3F,UACE,mBAAG5O,UAAU,gDAAb,SAA8DkN,GAAQQ,EAAOmI,aAC7E,sBAAKjV,MAAO,CAAE+N,QAAS,OAAQC,WAAY,UAA3C,UACE,mBAAG5O,UAAS,kCAAZ,SAAkDgY,IAClD,cAAC,eAAD,CAActX,KAAK,uBArCV,MCuFN2X,GA3GH,WAAO,IAAD,UACVtQ,EAAWpI,IACX2B,EAAUC,cACVF,EAAWtB,cACX+C,EAAuB,UAAGzB,EAASG,aAAZ,aAAG,EAAgBsB,wBAC1C4S,EAAiB,UAAGrU,EAASG,aAAZ,aAAG,EAAgBkU,kBACpCC,EAAoB,UAAGtU,EAASG,aAAZ,aAAG,EAAgBmU,qBAC7C,EAAwC9R,oBAAkB,GAA1D,mBAAOyU,EAAP,KAAqBC,EAArB,KACA,EAAkC1U,mBAAwB,MAA1D,mBAAO2U,EAAP,KAAkBC,EAAlB,KAEMC,EAAkBC,uBAAY,WAClCJ,GAAgB,KACf,IAEGK,EAAmBD,uBAAY,WACnCJ,GAAgB,GACE,UAAdC,IACFzQ,ErBHG,CAAErH,KAAM6F,IqBIXkS,EAAa,OAEX3V,GAAyBxB,EAAQuB,QAAQC,GACzC4S,GAAmBpU,EAAQuB,QAAQ6S,GACnCC,GAAsBrU,EAAQuB,QAAQ8S,KACzC,CAAC6C,EAAW1V,EAAyBxB,EAASoU,EAAmBC,EAAsB5N,IAEpF8Q,EAAqBC,IAAMH,aAAY,WAC3CF,EAAa,WACZ,IAQH,OANAxI,qBAAU,WACJjF,GAAU,eAAgBjD,EAASqD,MAClCrD,EAAS,CAAErH,KAAMyG,KACtBY,EAAS+J,QACR,IAGD,qCACGwG,GACC,cAAC,GAAD,CAAOjJ,aAAcuJ,EAAkBlY,KAAM8X,EAA7C,SACE,cAAC,GAAD,MAGJ,cAAC,EAAD,IACA,eAAC,IAAD,CAAQnX,SAAQ,2BAAEyB,QAAF,IAAEA,IAA2B4S,SAA7B,QAAkDC,SAAlD,QAA0EtU,EAA1F,UACE,cAAC,IAAD,CAAO6K,KAAK,IAAI7L,OAAK,EAArB,SACE,sBAAML,UAAW+Y,KAAU5U,KAA3B,SACE,qBAAKnE,UAAW+Y,KAAU3U,QAA1B,SACE,eAAC4U,EAAA,EAAD,CAAaC,QAASC,IAAtB,UACE,cAAC,EAAD,IACA,cAAC,GAAD,CAAmBjK,YAAayJ,EAAiB1J,YAAa6J,aAKtE,cAAC,IAAD,CAAO3M,KAAK,QAAQ7L,OAAK,EAAzB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO6L,KAAK,YAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,sBAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,SAAS7L,OAAK,EAA1B,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO6L,KAAK,YAAY7L,OAAK,EAA7B,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO6L,KAAK,mBAAmB7L,OAAK,EAApC,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO6L,KAAK,kBAAkB7L,OAAK,EAAnC,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAAgB6L,KAAK,WAArB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,mBAAZ,SACE,cAAC,GAAD,SAGHpJ,GACC,cAAC,IAAD,CAAOoJ,KAAK,mBAAZ,SACE,cAAC,GAAD,CAAOmD,aAAcuJ,EAAkBlY,KAAM,aAA7C,SACE,cAAC,GAAD,QAILgV,GACC,cAAC,IAAD,CAAOxJ,KAAK,YAAZ,SACE,cAAC,GAAD,CAAOmD,aAAcuJ,EAAkBlY,KAAM,QAA7C,SACE,cAAC,GAAD,QAILiV,GACC,cAAC,IAAD,CAAOzJ,KAAK,sBAAZ,SACE,cAAC,GAAD,CAAOmD,aAAcuJ,EAAkBlY,KAAM,QAA7C,SACE,cAAC,GAAD,Y,mBCpHNyY,GAA8B,CAClC3H,YAAa,KACbC,cAAc,EACd2H,aAAa,GCKTD,GAA8B,CAClCzX,gBAAiB,KACjBC,uBAAwB,GACxB0X,iBAAkB,GCTdF,GAA8B,CAClC5V,YAAa,KACb+V,oBAAoB,EACpBC,mBAAmB,EACnB5I,mBAAmB,GCsBfwI,GAA8B,CAClCK,iBAAiB,EACjB1G,eAAe,EACf2G,aAAa,EACbC,WAAW,EACXC,eAAe,EACfC,aAAa,EACb/G,UAAW,KACXb,gBAAgB,EAChB6H,cAAc,EACdC,eAAe,EACfC,mBAAmB,EACnBC,iBAAiB,EACjBpM,QAAQ,EACR9C,KAAM,MCrCFqO,GAA8B,CAClCc,kBAAkB,EAClBC,iBAAiB,EACjBnD,MAAO,EACPC,WAAY,EACZb,OAAQ,GACRgE,aAAa,GCXFC,GAAcC,aAAgB,CACzC/W,kBHQsC,WAAgF,IAA/E9B,EAA8E,uDAAtE2X,GAAcmB,EAAwD,uCACrH,OAAQA,EAAO5Z,MACb,KAAKiF,EACH,OAAO,6BACFnE,GADL,IAEE8X,oBAAoB,IAGxB,KAAK1T,EACH,OAAO,6BACFpE,GADL,IAEE+B,YAAa+W,EAAO1R,QACpB0Q,oBAAoB,EACpBC,mBAAmB,EACnB5I,mBAAmB,IAGvB,KAAK9K,EACH,OAAO,6BACFrE,GADL,IAEE8X,oBAAoB,EACpBC,mBAAmB,IAGvB,QACE,OAAO/X,IGhCXC,kBJYsC,WAA6E,IAA5ED,EAA2E,uDAAnE2X,GAAcmB,EAAqD,uCAClH,OAAQA,EAAO5Z,MACb,KAAKoF,EACH,OAAO,6BACFtE,GADL,IAEEG,uBAAuB,GAAD,mBAAMH,EAAMG,wBAAZ,CAAoC2Y,EAAO1R,YAGrE,KAAK7C,EACH,IAAMoD,EAAMmR,EAAO1R,QACb2R,EAA4B/Y,EAAMG,uBAAuBsC,QAAO,SAAAhC,GAAI,OAAIA,EAAKkH,MAAQA,KAC3F,OAAO,6BACF3H,GADL,IAEEG,uBAAwB4Y,IAG5B,KAAKrU,EACH,OAAO,6BACF1E,GADL,IAEEE,gBAAiB4Y,EAAO1R,UAG5B,KAAK5C,EACH,OAAO,6BACFxE,GADL,IAEE6X,iBAAkB7X,EAAM6X,iBAAmB,IAG/C,KAAKpT,EACH,OAAO,6BACFzE,GADL,IAEE6X,iBAAkB7X,EAAM6X,iBAAmB,IAG/C,KAAKlT,EACH,IAAMoU,EAAyB,YAAO/Y,EAAMG,wBAE5C,OADA4Y,EAA0BC,OAAOF,EAAO1R,QAAQP,WAAY,EAAGkS,EAA0BC,OAAOF,EAAO1R,QAAQT,UAAW,GAAG,IACtH,6BACF3G,GADL,IAEEG,uBAAwB4Y,IAG5B,QACE,OAAO/Y,IItDXkM,MLG0B,WAAiE,IAAhElM,EAA+D,uDAAvD2X,GAAcmB,EAAyC,uCAC1F,OAAQA,EAAO5Z,MACb,KAAK0F,EACH,OAAO,6BACF5E,GADL,IAEEiQ,cAAc,IAGlB,KAAKpL,EACH,OAAO,6BACF7E,GADL,IAEEgQ,YAAa8I,EAAO1R,QACpB6I,cAAc,EACd2H,aAAa,IAGjB,KAAK9S,EACH,OAAO,6BACF9E,GADL,IAEEiQ,cAAc,EACd2H,aAAa,IAGjB,KAAK7S,EACH,OAAO,6BACF/E,GADL,IAEEgQ,YAAa,KACbC,cAAc,EACd2H,aAAa,IAGjB,QACE,OAAO5X,IKlCX2U,ODU2B,WAA8D,IAA7D3U,EAA4D,uDAApD2X,GAAcmB,EAAsC,uCACxF,OAAQA,EAAO5Z,MACb,KAAK6G,GACH,OAAO,6BACF/F,GADL,IAEE2Y,aAAa,IAGjB,KAAK3S,GACH,OAAO,6BACFhG,GADL,IAEE6R,WAAOrH,EACPmO,aAAa,IAGjB,KAAK1S,GACH,OAAO,6BACFjG,GADL,IAEE6R,MAAOiH,EAAO1R,QACduR,aAAa,IAGjB,KAAKzS,GACH,OAAO,6BACFlG,GADL,IAEE6R,WAAOrH,EACPmO,aAAa,IAGjB,KAAKxS,GACH,OAAO,6BACFnG,GADL,IAEE6R,WAAOrH,EACP+K,MAAOuD,EAAO1R,QAAQmO,MACtBC,WAAYsD,EAAO1R,QAAQoO,WAC3Bb,OAAQmE,EAAO1R,QAAQuN,SAG3B,QACE,OAAO3U,IChDXsJ,KFwCyB,WAAgE,IAA/DtJ,EAA8D,uDAAtD2X,GAAcmB,EAAwC,uCACxF,OAAQA,EAAO5Z,MACb,KAAK8F,EACH,OAAO,6BACFhF,GADL,IAEEgY,iBAAiB,IAGrB,KAAK/S,EACH,OAAO,6BACFjF,GADL,IAEEgY,iBAAiB,EACjB1G,eAAe,EACfD,UAAW,KAGf,KAAKnM,EACH,OAAO,6BACFlF,GADL,IAEEgY,iBAAiB,EACjB1G,eAAe,EACfD,UAAW,+HAGf,KAAKlM,EACH,OAAO,6BACFnF,GADL,IAEEiY,aAAa,IAGjB,KAAK7S,EACH,OAAO,6BACFpF,GADL,IAEEiY,aAAa,EACbC,WAAW,EACX5O,KAAMwP,EAAO1R,QACbgF,QAAQ,EACRiF,UAAW,KAGf,KAAKhM,GACH,OAAO,6BACFrF,GADL,IAEEiY,aAAa,EACbC,WAAW,EACX7G,UAAW,6HACXjF,QAAQ,IAGZ,KAAK9G,GACH,OAAO,6BACFtF,GADL,IAEEmY,eAAe,IAGnB,KAAK5S,GACH,OAAO,6BACFvF,GADL,IAEEmY,eAAe,EACfC,aAAa,EACbhM,QAAQ,EACR9C,KAAM,KACN+H,UAAW,KAGf,KAAK7L,GACH,OAAO,6BACFxF,GADL,IAEEmY,eAAe,EACfC,aAAa,EACb/G,UAAW,0KAGf,KAAK5L,GACH,OAAO,6BACFzF,GADL,IAEEwQ,gBAAgB,IAGpB,KAAK9K,GACH,OAAO,6BACF1F,GADL,IAEEwQ,gBAAgB,EAChB6H,cAAc,EACd/O,KAAMwP,EAAO1R,QACbgF,QAAQ,EACRkM,eAAe,EACfjH,UAAW,KAGf,KAAK1L,GACH,OAAO,6BACF3F,GADL,IAEEwQ,gBAAgB,EAChB6H,cAAc,EACdhH,UAAW,+NACXiH,eAAe,IAGnB,KAAK1S,GACH,OAAO,6BACF5F,GADL,IAEEuY,mBAAmB,IAGvB,KAAK1S,GACH,OAAO,6BACF7F,GADL,IAEEuY,mBAAmB,EACnBC,iBAAiB,EACjBlP,KAAMwP,EAAO1R,QACbiK,UAAW,KAGf,KAAKvL,GACH,OAAO,6BACF9F,GADL,IAEEuY,mBAAmB,EACnBC,iBAAiB,EACjBnH,UAAW,uOAGf,QACE,OAAOrR,MGnKPiZ,IAFc,kBAAXC,QAAuBA,OAAOC,qCAAuCD,OAAOC,qCAAqC,IAAaC,MAErGC,aAAgBC,MCRxC,SAACC,GACP,IAAIC,EAA2B,KAC/B,OAAO,SAAAC,GAAI,OAAI,SAACX,GACd,IAAQvS,EAAuBgT,EAAvBhT,SACArH,GADuBqa,EAAbG,SACQZ,EAAlB5Z,MAAMkI,EAAY0R,EAAZ1R,QAEVlI,IAAS6G,KAAqByT,EAAS,IAAIG,UAAUvS,IACrDoS,IACFA,EAAOI,OAAS,SAAAC,GAAK,OAAItT,EAAS,CAAErH,KAAM8G,GAAuBoB,QAASyS,KAC1EL,EAAOM,QAAU,SAAAD,GAAK,OAAItT,EAAS,CAAErH,KAAM+G,GAAqBmB,QAASyS,KACzEL,EAAOO,QAAU,SAAAF,GAAK,OAAItT,EAAS,CAAErH,KAAMgH,GAAsBkB,QAASyS,KAC1EL,EAAOQ,UAAY,SAAAH,GAAK,OAAItT,EAAS,CAAErH,KAAMiH,GAAgBiB,QAASiB,KAAK4R,MAAMJ,EAAMhY,UAEzF4X,EAAKX,SDHES,GAAQW,aAAYtB,GAAaK,IER9CrK,IAASuH,OACP,cAAC,IAAMgE,WAAP,UACE,cAAC,IAAD,CAAeC,SAAUC,IAAzB,SACE,cAAC,IAAD,CAAUd,MAAOA,GAAjB,SACE,cAAC,GAAD,UAINpP,SAASiE,eAAe,U,mBCf1BrQ,EAAOC,QAAU,CAAC,KAAO,oCAAoC,SAAW,wCAAwC,eAAiB,oFAAoF,kBAAoB,uFAAuF,MAAQ,qCAAqC,KAAO,oCAAoC,MAAQ,qCAAqC,WAAa,4C,mBCAldD,EAAOC,QAAU,CAAC,UAAY,qCAAqC,MAAQ,iCAAiC,WAAa,sCAAsC,SAAW,sC,mBCA1KD,EAAOC,QAAU,CAAC,QAAU,mCAAmC,KAAO,gCAAgC,WAAa,sCAAsC,SAAW,sC,mBCApKD,EAAOC,QAAU,CAAC,QAAU,+BAA+B,QAAU,+BAA+B,KAAO,4BAA4B,OAAS,8BAA8B,KAAO,4BAA4B,UAAY,mC,mBCA7ND,EAAOC,QAAU,CAAC,KAAO,+BAA+B,MAAQ,gCAAgC,MAAQ,gCAAgC,WAAa,qCAAqC,KAAO,iC,mBCAjMD,EAAOC,QAAU,CAAC,QAAU,mCAAmC,KAAO,gCAAgC,QAAU,mCAAmC,aAAe,wCAAwC,kBAAoB,6CAA6C,OAAS,oC,mBCApRD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,QAAU,uBAAuB,KAAO,oBAAoB,OAAS,sBAAsB,KAAO,sB,mBCArJD,EAAOC,QAAU,CAAC,UAAY,gCAAgC,MAAQ,8B,mBCAtED,EAAOC,QAAU,CAAC,QAAU,0BAA0B,QAAU,0BAA0B,KAAO,uBAAuB,OAAS,yBAAyB,KAAO,yB,mBCAjKD,EAAOC,QAAU,CAAC,QAAU,gCAAgC,QAAU,gCAAgC,KAAO,6BAA6B,OAAS,+BAA+B,KAAO,+B,mBCAzLD,EAAOC,QAAU,CAAC,KAAO,wBAAwB,WAAa,8BAA8B,YAAc,+BAA+B,KAAO,0B,mBCAhJD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,UAAY,2B,mBCA3DD,EAAOC,QAAU,CAAC,KAAO,kBAAkB,QAAU,wB","file":"static/js/main.bf1787ef.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"element\":\"Count_element__3V7ye\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"ModalOverlay_overlay__3Mq54\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"FeedDetails_list__1R-ge\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Profile_main__31kfc\",\"content\":\"Profile_content__1G7E8\",\"navColumn\":\"Profile_navColumn__DgcbP\",\"navBar\":\"Profile_navBar__3PE4y\",\"navLink\":\"Profile_navLink__3Wlqe\",\"activeNavLink\":\"Profile_activeNavLink__3uu7d\",\"navText\":\"Profile_navText__3Qb01\",\"profileColumn\":\"Profile_profileColumn__2tx_Q\",\"profileInfo\":\"Profile_profileInfo__19mjA\",\"ordersList\":\"Profile_ordersList__3fZrw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__16zt-\",\"headerContent\":\"AppHeader_headerContent__3bmWV\",\"navGroup\":\"AppHeader_navGroup__xacWx\",\"navButton\":\"AppHeader_navButton__1FmLD\",\"activeNavButton\":\"AppHeader_activeNavButton__1B_Vc\",\"navText\":\"AppHeader_navText__21Ruo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Feed_main__2v_45\",\"content\":\"Feed_content__HgczD\",\"feed\":\"Feed_feed__WR-Mi\",\"ordersList\":\"Feed_ordersList__3drC9\",\"orders\":\"Feed_orders__2FDbA\",\"ordersNumbers\":\"Feed_ordersNumbers__3YyiM\",\"ordersReady\":\"Feed_ordersReady__3XYe5\",\"ordersInWork\":\"Feed_ordersInWork__2VIc3 Feed_ordersReady__3XYe5\",\"colorfulDigits\":\"Feed_colorfulDigits__2euHF\",\"largeDigits\":\"Feed_largeDigits__2Cl6p\"};","import { TypedUseSelectorHook, useSelector as selectorHook, useDispatch as dispatchHook } from 'react-redux';\r\nimport { RootState, AppThunk, AppDispatch } from './reducers';\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\n","import React from 'react';\r\nimport { Link, NavLink, useLocation } from 'react-router-dom';\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport appHeader from './AppHeader.module.css';\r\n\r\nconst AppHeader = () => {\r\n  const { pathname } = useLocation<any>();\r\n  return (\r\n    <header className={`${appHeader.header} pt-4 pb-4`}>\r\n      <div className={appHeader.headerContent}>\r\n        <div className={`${appHeader.navGroup}`}>\r\n          <NavLink exact to='/' className={`${appHeader.navButton} pt-4 pb-4 pl-5 pr-5 mr-2`} activeClassName={appHeader.activeNavButton}>\r\n            <BurgerIcon type={`${pathname === '/' ? 'primary' : 'secondary'}`} />\r\n            <p className={`text text_type_main-medium ml-2 ${appHeader.navText}`}>Конструктор</p>\r\n          </NavLink>\r\n          <NavLink exact to='/feed' className={`${appHeader.navButton} pt-4 pb-4 pl-5 pr-5`} activeClassName={appHeader.activeNavButton}>\r\n            <ListIcon type={`${pathname === '/feed' ? 'primary' : 'secondary'}`} />\r\n            <p className={`text text_type_main-medium ml-2 ${appHeader.navText}`}>Лента заказов</p>\r\n          </NavLink>\r\n        </div>\r\n        <Link to='/'>\r\n          <Logo />\r\n        </Link>\r\n        <div className={`${appHeader.navGroup}`} style={{ justifyContent: 'flex-end' }}>\r\n          <NavLink to='/profile' className={`${appHeader.navButton} pt-4 pb-4 pl-5 pr-5`} activeClassName={appHeader.activeNavButton}>\r\n            <ProfileIcon type={`${pathname.includes('/profile') ? 'primary' : 'secondary'}`} />\r\n            <p className={`text text_type_main-medium ml-2 ${appHeader.navText}`}>Личный кабинет</p>\r\n          </NavLink>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default AppHeader;\r\n","import React from 'react';\r\nimport countStyles from './Count.module.css';\r\n\r\ntype TCountProps = { count: number | boolean | undefined };\r\n\r\nconst Count = ({ count }: TCountProps) => {\r\n  return (\r\n    <>\r\n      {count! > 0 && (\r\n        <div className={countStyles.element}>\r\n          <p className='text text_type_main-small'>{count}</p>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Count;\r\n","import React, { useMemo } from 'react';\r\nimport { useDrag } from 'react-dnd';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport burgerIngredient from './BurgerIngredient.module.css';\r\nimport Count from '../Count/Count';\r\nimport { TBurgerIngredientType } from '../../utils/types';\r\n\r\ntype TBurgerIngredientProps = Omit<TBurgerIngredientType, 'proteins' | 'fat' | 'carbohydrates' | 'calories'>;\r\n\r\nconst BurgerIngredient = (props: TBurgerIngredientProps) => {\r\n  const location = useLocation<any>();\r\n  const history = useHistory();\r\n  const { constructorBuns, constructorIngredients } = useSelector(state => state.burgerConstructor);\r\n\r\n  const bunsCount = useMemo(() => {\r\n    if (!constructorBuns) return;\r\n    if (constructorBuns) return constructorBuns._id === props._id && 2;\r\n  }, [constructorBuns]);\r\n\r\n  const ingredientCount = useMemo(() => {\r\n    let count = 0;\r\n    constructorIngredients.forEach(item => {\r\n      if (item._id === props._id) count = count + 1;\r\n    });\r\n    return count;\r\n  }, [constructorIngredients]);\r\n\r\n  const handleClick = () => {\r\n    history.replace({\r\n      pathname: `/ingredients/${props._id}`,\r\n      state: { backgroundForIngredient: location }\r\n    });\r\n  };\r\n\r\n  const [{ opacity }, dragRef] = useDrag({\r\n    type: 'ingredient',\r\n    item: { _id: props._id, name: props.name, type: props.type, image: props.image, price: props.price },\r\n    collect: monitor => ({\r\n      opacity: monitor.isDragging() ? 0.5 : 1\r\n    })\r\n  });\r\n\r\n  return (\r\n    <div className={burgerIngredient.item} onClick={handleClick} ref={dragRef} style={{ opacity: `${opacity}` }}>\r\n      <Count count={props.type === 'bun' ? bunsCount : ingredientCount} />\r\n      <img src={props.image} alt='burger-item' className={burgerIngredient.image} />\r\n      <div className={`${burgerIngredient.price} mt-1`}>\r\n        <p className={`text text_type_main-medium ${burgerIngredient.priceValue}`}>{props.price}</p>\r\n        <CurrencyIcon type='primary' />\r\n      </div>\r\n      <p style={{ margin: 0 }} className={`text text_type_main-medium ${burgerIngredient.name} mt-1`}>\r\n        {props.name}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredient;\r\n","import React, { useRef, useState, useMemo } from 'react';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport burgerIngredients from './BurgerIngredients.module.css';\r\nimport BurgerIngredient from '../BurgerIngredient/BurgerIngredient';\r\n\r\nconst BurgerIngredients = () => {\r\n  const data = useSelector(state => state.burgerIngredients.ingredients);\r\n  const tabsRef = useRef<HTMLDivElement>(null);\r\n  const bunsRef = useRef<HTMLDivElement>(null);\r\n  const saucesRef = useRef<HTMLDivElement>(null);\r\n  const mainsRef = useRef<HTMLDivElement>(null);\r\n  const [currentTab, setCurrentTab] = useState('bun');\r\n  const buns = useMemo(() => {\r\n    return data && data.filter(item => item.type === 'bun');\r\n  }, [data]);\r\n  const sauces = useMemo(() => {\r\n    return data && data.filter(item => item.type === 'sauce');\r\n  }, [data]);\r\n  const main = useMemo(() => {\r\n    return data && data.filter(item => item.type === 'main');\r\n  }, [data]);\r\n\r\n  const checkActualTab = () => {\r\n    const tabsTop = tabsRef.current!.getBoundingClientRect().top;\r\n    const bunsDistance = Math.abs(tabsTop! - bunsRef.current!.getBoundingClientRect().top);\r\n    const saucesDistance = Math.abs(tabsTop! - saucesRef.current!.getBoundingClientRect().top);\r\n    const mainsDistance = Math.abs(tabsTop! - mainsRef.current!.getBoundingClientRect().top);\r\n    const minValue = Math.min(bunsDistance, saucesDistance, mainsDistance);\r\n    if (minValue === bunsDistance) {\r\n      setCurrentTab('bun');\r\n    } else if (minValue === saucesDistance) {\r\n      setCurrentTab('sauce');\r\n    } else {\r\n      setCurrentTab('main');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={burgerIngredients.content}>\r\n      <h1 className='mt-10 text text_type_main-large' style={{ marginBottom: 0 }}>\r\n        Соберите бургер\r\n      </h1>\r\n      <div className={`${burgerIngredients.tabs} mt-5`} ref={tabsRef}>\r\n        <Tab value='bun' active={currentTab === 'bun'} onClick={() => console.log('tabclick')}>\r\n          Булки\r\n        </Tab>\r\n        <Tab value='sauce' active={currentTab === 'sauce'} onClick={() => console.log('tabclick')}>\r\n          Соусы\r\n        </Tab>\r\n        <Tab value='main' active={currentTab === 'main'} onClick={() => console.log('tabclick')}>\r\n          Начинка\r\n        </Tab>\r\n      </div>\r\n      {data ? (\r\n        <div className={burgerIngredients.categories} onScroll={checkActualTab}>\r\n          <h2 className='mt-10 text text_type_main-medium' style={{ marginBottom: 0 }}>\r\n            Булки\r\n          </h2>\r\n          <div className={`${burgerIngredients.category} pl-4 mt-6`} ref={bunsRef}>\r\n            {buns &&\r\n              buns.map(item => (\r\n                <BurgerIngredient key={item._id} _id={item._id} type={item.type} image={item.image_large} price={item.price} name={item.name} />\r\n              ))}\r\n          </div>\r\n          <h2 className='mt-10 text text_type_main-medium' style={{ marginBottom: 0 }}>\r\n            Соусы\r\n          </h2>\r\n          <div className={`${burgerIngredients.category} pl-4 mt-6`} ref={saucesRef}>\r\n            {sauces &&\r\n              sauces.map(item => (\r\n                <BurgerIngredient key={item._id} _id={item._id} type={item.type} image={item.image_large} price={item.price} name={item.name} />\r\n              ))}\r\n          </div>\r\n          <h2 className='mt-10 text text_type_main-medium' style={{ marginBottom: 0 }}>\r\n            Начинка\r\n          </h2>\r\n          <div className={`${burgerIngredients.category} pl-4 mt-6`} ref={mainsRef}>\r\n            {main &&\r\n              main.map(item => (\r\n                <BurgerIngredient key={item._id} _id={item._id} type={item.type} image={item.image_large} price={item.price} name={item.name} />\r\n              ))}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredients;\r\n","export const GET_BURGER_INGREDIENTS_REQUEST: 'GET_BURGER_INGREDIENTS_REQUEST' = 'GET_BURGER_INGREDIENTS_REQUEST';\r\nexport const GET_BURGER_INGREDIENTS_SUCCESS: 'GET_BURGER_INGREDIENTS_SUCCESS' = 'GET_BURGER_INGREDIENTS_SUCCESS';\r\nexport const GET_BURGER_INGREDIENTS_FAILED: 'GET_BURGER_INGREDIENTS_FAILED' = 'GET_BURGER_INGREDIENTS_FAILED';\r\n\r\nexport const ADD_CONSTRUCTOR_INGREDIENT: 'ADD_CONSTRUCTOR_INGREDIENT' = 'ADD_CONSTRUCTOR_INGREDIENT';\r\nexport const DELETE_CONSTRUCTOR_INGREDIENT: 'DELETE_CONSTRUCTOR_INGREDIENT' = 'DELETE_CONSTRUCTOR_INGREDIENT';\r\nexport const INCREASE_CONSTRUCTOR_COUNT: 'INCREASE_CONSTRUCTOR_COUNT' = 'INCREASE_CONSTRUCTOR_COUNT';\r\nexport const DECREASE_CONSTRUCTOR_COUNT: 'DECREASE_CONSTRUCTOR_COUNT' = 'DECREASE_CONSTRUCTOR_COUNT';\r\nexport const ADD_CONSTRUCTOR_BUN: 'ADD_CONSTRUCTOR_BUN' = 'ADD_CONSTRUCTOR_BUN';\r\nexport const UPDATE_CONSTRUCTOR_INGREDIENTS: 'UPDATE_CONSTRUCTOR_INGREDIENTS' = 'UPDATE_CONSTRUCTOR_INGREDIENTS';\r\n\r\nexport const ADD_BURGER_INGREDIENT_INFO: 'ADD_BURGER_INGREDIENT_INFO' = 'ADD_BURGER_INGREDIENT_INFO';\r\n\r\nexport const GET_ORDER_REQUEST: 'GET_ORDER_REQUEST' = 'GET_ORDER_REQUEST';\r\nexport const GET_ORDER_SUCCESS: 'GET_ORDER_SUCCESS' = 'GET_ORDER_SUCCESS';\r\nexport const GET_ORDER_FAILED: 'GET_ORDER_FAILED' = 'GET_ORDER_FAILED';\r\n\r\nexport const CLEAR_BURGER_INGREDIENT_INFO: 'CLEAR_CURRENT_INGREDIENT_INFO' = 'CLEAR_CURRENT_INGREDIENT_INFO';\r\nexport const CLEAR_ORDER: 'CLEAR_ORDER' = 'CLEAR_ORDER';\r\n\r\nexport const REGISTER_REQUEST: 'REGISTER_REQUEST' = 'REGISTER_REQUEST';\r\nexport const REGISTER_SUCCESS: 'REGISTER_SUCCESS' = 'REGISTER_SUCCESS';\r\nexport const REGISTER_FAILED: 'REGISTER_FAILED' = 'REGISTER_FAILED';\r\n\r\nexport const AUTH_REQUEST: 'AUTH_REQUEST' = 'AUTH_REQUEST';\r\nexport const AUTH_SUCCESS: 'AUTH_SUCCESS' = 'AUTH_SUCCESS';\r\nexport const AUTH_FAILED: 'AUTH_FAILED' = 'AUTH_FAILED';\r\n\r\nexport const LOGOUT_REQUEST: 'LOGOUT_REQUEST' = 'LOGOUT_REQUEST';\r\nexport const LOGOUT_SUCCESS: 'LOGOUT_SUCCESS' = 'LOGOUT_SUCCESS';\r\nexport const LOGOUT_FAILED: 'LOGOUT_FAILED' = 'LOGOUT_FAILED';\r\n\r\nexport const GET_USER_REQUEST: 'GET_USER_REQUEST' = 'GET_USER_REQUEST';\r\nexport const GET_USER_SUCCESS: 'GET_USER_SUCCESS' = 'GET_USER_SUCCESS';\r\nexport const GET_USER_FAILED: 'GET_USER_FAILED' = 'GET_USER_FAILED';\r\n\r\nexport const USER_UPDATE_REQUEST: 'USER_UPDATE_REQUEST' = 'USER_UPDATE_REQUEST';\r\nexport const USER_UPDATE_SUCCESS: 'USER_UPDATE_SUCCESS' = 'USER_UPDATE_SUCCESS';\r\nexport const USER_UPDATE_FAILED: 'USER_UPDATE_FAILED' = 'USER_UPDATE_FAILED';\r\n\r\nexport const GET_ORDERS_ALL_REQUEST: 'GET_ORDERS_ALL_REQUEST' = 'GET_ORDERS_ALL_REQUEST';\r\nexport const GET_ORDERS_ALL_SUCCESS: 'GET_ORDERS_ALL_SUCCESS' = 'GET_ORDERS_ALL_SUCCESS';\r\nexport const GET_ORDERS_ALL_FAILED: 'GET_ORDERS_ALL_FAILED' = 'GET_ORDERS_ALL_FAILED';\r\n\r\nexport const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';","import { TBurgerIngredientType } from '../../utils/types';\r\nimport {\r\n  ADD_CONSTRUCTOR_INGREDIENT,\r\n  INCREASE_CONSTRUCTOR_COUNT,\r\n  DECREASE_CONSTRUCTOR_COUNT,\r\n  ADD_CONSTRUCTOR_BUN,\r\n  DELETE_CONSTRUCTOR_INGREDIENT,\r\n  UPDATE_CONSTRUCTOR_INGREDIENTS\r\n} from '../types';\r\n\r\ntype TAddConstructorIngredientAction = { readonly type: typeof ADD_CONSTRUCTOR_INGREDIENT; readonly payload: TBurgerIngredientType };\r\ntype TDeleteConstructorIngredientAction = { readonly type: typeof DELETE_CONSTRUCTOR_INGREDIENT; readonly payload: string };\r\ntype TIncreaseConstructorCountAction = { readonly type: typeof INCREASE_CONSTRUCTOR_COUNT };\r\ntype TDecreaseConstructorCountAction = { readonly type: typeof DECREASE_CONSTRUCTOR_COUNT };\r\ntype TAddConstructorBunAction = { readonly type: typeof ADD_CONSTRUCTOR_BUN; readonly payload: TBurgerIngredientType };\r\ntype TUpdateConstructorIngredientsAction = {\r\n  readonly type: typeof UPDATE_CONSTRUCTOR_INGREDIENTS;\r\n  readonly payload: { dragIndex: number; hoverIndex: number };\r\n};\r\n\r\nexport type TBurgerConstructorActions =\r\n  | TAddConstructorIngredientAction\r\n  | TDecreaseConstructorCountAction\r\n  | TDeleteConstructorIngredientAction\r\n  | TIncreaseConstructorCountAction\r\n  | TAddConstructorBunAction\r\n  | TUpdateConstructorIngredientsAction;\r\n\r\nexport const addConstructorIngredient = (item: TBurgerIngredientType): TAddConstructorIngredientAction => {\r\n  const uniqueKey = Math.random();\r\n  item.key = uniqueKey.toString();\r\n  return { type: ADD_CONSTRUCTOR_INGREDIENT, payload: item };\r\n};\r\n\r\nexport const deleteConstructorIngredient = (key: string): TDeleteConstructorIngredientAction => {\r\n  return { type: DELETE_CONSTRUCTOR_INGREDIENT, payload: key };\r\n};\r\n\r\nexport const increaseConstructorCount = (): TIncreaseConstructorCountAction => {\r\n  return { type: INCREASE_CONSTRUCTOR_COUNT };\r\n};\r\n\r\nexport const decreaseConstructorCount = (): TDecreaseConstructorCountAction => {\r\n  return { type: DECREASE_CONSTRUCTOR_COUNT };\r\n};\r\n\r\nexport const addConstructorBun = (item: TBurgerIngredientType): TAddConstructorBunAction => {\r\n  const uniqueKey = Math.random();\r\n  item.key = uniqueKey.toString();\r\n  return { type: ADD_CONSTRUCTOR_BUN, payload: item };\r\n};\r\n\r\nexport const updateConstructorIngredients = (dragIndex: number, hoverIndex: number): TUpdateConstructorIngredientsAction => {\r\n  return {\r\n    type: UPDATE_CONSTRUCTOR_INGREDIENTS,\r\n    payload: { dragIndex, hoverIndex }\r\n  };\r\n};\r\n","import React, { useRef } from 'react';\r\nimport { useDispatch } from '../../services/hooks';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\nimport { CurrencyIcon, DragIcon, LockIcon, DeleteIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport burgerConstructorItem from './BurgerConstructorItem.module.css';\r\nimport { decreaseConstructorCount, deleteConstructorIngredient, updateConstructorIngredients } from '../../services/actions/burgerConstructor';\r\n\r\ntype TBurgerConstructorItemProps = {\r\n  uniqueKey?: string;\r\n  index?: number;\r\n  type?: string;\r\n  image?: string;\r\n  name: string;\r\n  price: number;\r\n};\r\n\r\nconst BurgerConstructorItem = (props: TBurgerConstructorItemProps) => {\r\n  const dispatch = useDispatch();\r\n  const ref = useRef<HTMLDivElement>(null);\r\n  const burgerTopBottomNote = () => {\r\n    if (!props.type) return '';\r\n    if (props.type === 'bun-top') return '(верх)';\r\n    if (props.type === 'bun-bottom') return '(низ)';\r\n  };\r\n  const burgerTopBottomClass = () => {\r\n    if (!props.type) return burgerConstructorItem.itemData;\r\n    if (props.type === 'bun-top') return burgerConstructorItem.itemDataBunTop;\r\n    if (props.type === 'bun-bottom') return burgerConstructorItem.itemDataBunBottom;\r\n  };\r\n\r\n  const handleDeleteIngredient = () => {\r\n    dispatch(deleteConstructorIngredient(props.uniqueKey!));\r\n    dispatch(decreaseConstructorCount());\r\n  };\r\n\r\n  const [, dropRef] = useDrop({\r\n    accept: 'constructor',\r\n    hover: (item: TBurgerConstructorItemProps, monitor) => {\r\n      if (!ref.current) return;\r\n      const dragIndex = item.index;\r\n      const hoverIndex = props.index;\r\n      if (dragIndex === hoverIndex) return;\r\n      const hoverBoundingRect = ref.current.getBoundingClientRect();\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset = monitor.getClientOffset();\r\n      const hoverClientY = clientOffset!.y - hoverBoundingRect.top;\r\n      if (dragIndex! < hoverIndex! && hoverClientY < hoverMiddleY) return;\r\n      if (dragIndex! > hoverIndex! && hoverClientY > hoverMiddleY) return;\r\n      dispatch(updateConstructorIngredients(dragIndex!, hoverIndex!));\r\n      item.index = hoverIndex;\r\n    }\r\n  });\r\n\r\n  const [{ opacity }, dragRef] = useDrag({\r\n    type: 'constructor',\r\n    item: { index: props.index },\r\n    collect: monitor => ({\r\n      opacity: monitor.isDragging() ? 0 : 1\r\n    })\r\n  });\r\n\r\n  dragRef(dropRef(ref));\r\n\r\n  return (\r\n    <div\r\n      className={`${burgerConstructorItem.item}`}\r\n      style={{ justifyContent: `${props.type && 'flex-end'}`, opacity: `${opacity}` }}\r\n      ref={!props.type ? ref : null}>\r\n      {!props.type && <DragIcon type='primary' />}\r\n      <div className={`${burgerTopBottomClass()} pl-6 pt-4 pb-4 pr-8`}>\r\n        <img alt='item-card' src={props.image} className={burgerConstructorItem.image} />\r\n        <p className={`text text_type_main-medium ${burgerConstructorItem.name}`}>{`${props.name} ${burgerTopBottomNote()}`}</p>\r\n        <div className={burgerConstructorItem.price}>\r\n          <p className={`text text_type_main-medium ${burgerConstructorItem.priceValue}`}>{props.price}</p>\r\n          <CurrencyIcon type='primary' />\r\n        </div>\r\n        {props.type ? <LockIcon type='secondary' /> : <DeleteIcon type='primary' onClick={handleDeleteIngredient} />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructorItem;\r\n","import {\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAILED,\r\n  AUTH_REQUEST,\r\n  AUTH_SUCCESS,\r\n  AUTH_FAILED,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT_SUCCESS,\r\n  LOGOUT_FAILED,\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  GET_USER_FAILED,\r\n  USER_UPDATE_REQUEST,\r\n  USER_UPDATE_SUCCESS,\r\n  USER_UPDATE_FAILED\r\n} from '../types';\r\nimport { MAIN_API, setCookies, getCookie, retriableFetch, deleteCookies } from '../../utils/constants';\r\nimport { AppThunk, AppDispatch } from '../reducers';\r\nimport { TRes, TUser, TRefresh } from '../../utils/types';\r\n\r\ntype TRegisterActionRequest = { readonly type: typeof REGISTER_REQUEST };\r\ntype TRegisterActionSuccess = { readonly type: typeof REGISTER_SUCCESS };\r\ntype TRegisterActionFailed = { readonly type: typeof REGISTER_FAILED };\r\n\r\ntype TLoginActionRequest = { readonly type: typeof AUTH_REQUEST };\r\ntype TLoginActionSuccess = { readonly type: typeof AUTH_SUCCESS; readonly payload: TUser };\r\ntype TLoginActionFailed = { readonly type: typeof AUTH_FAILED };\r\n\r\ntype TLogoutActionRequest = { readonly type: typeof LOGOUT_REQUEST };\r\ntype TLogoutActionSuccess = { readonly type: typeof LOGOUT_SUCCESS };\r\ntype TLogoutActionFailed = { readonly type: typeof LOGOUT_FAILED };\r\n\r\ntype TGetUserActionRequest = { readonly type: typeof GET_USER_REQUEST };\r\ntype TGetUserActionSuccess = { readonly type: typeof GET_USER_SUCCESS; payload: TUser };\r\ntype TGetUserActionFailed = { readonly type: typeof GET_USER_FAILED };\r\n\r\ntype TUpdateUserActionRequest = { readonly type: typeof USER_UPDATE_REQUEST };\r\ntype TUpdateUserActionSuccess = { readonly type: typeof USER_UPDATE_SUCCESS; payload: TUser };\r\ntype TUpdateUserActionFailed = { readonly type: typeof USER_UPDATE_FAILED };\r\n\r\nexport type TUserActions =\r\n  | TRegisterActionRequest\r\n  | TRegisterActionSuccess\r\n  | TRegisterActionFailed\r\n  | TLoginActionRequest\r\n  | TLoginActionSuccess\r\n  | TLoginActionFailed\r\n  | TLogoutActionRequest\r\n  | TLogoutActionSuccess\r\n  | TLogoutActionFailed\r\n  | TGetUserActionRequest\r\n  | TGetUserActionSuccess\r\n  | TGetUserActionFailed\r\n  | TUpdateUserActionRequest\r\n  | TUpdateUserActionSuccess\r\n  | TUpdateUserActionFailed;\r\n\r\nconst registerRequest = (): TRegisterActionRequest => {\r\n  return { type: REGISTER_REQUEST };\r\n};\r\n\r\nconst registerSuccess = (): TRegisterActionSuccess => {\r\n  return { type: REGISTER_SUCCESS };\r\n};\r\n\r\nconst registerFailed = (): TRegisterActionFailed => {\r\n  return { type: REGISTER_FAILED };\r\n};\r\n\r\nconst loginRequest = (): TLoginActionRequest => {\r\n  return { type: AUTH_REQUEST };\r\n};\r\n\r\nconst loginSuccess = (user: TUser): TLoginActionSuccess => {\r\n  return { type: AUTH_SUCCESS, payload: user };\r\n};\r\n\r\nconst loginFailed = (): TLoginActionFailed => {\r\n  return { type: AUTH_FAILED };\r\n};\r\n\r\nconst logoutRequest = (): TLogoutActionRequest => {\r\n  return { type: LOGOUT_REQUEST };\r\n};\r\n\r\nconst logoutSuccess = (): TLogoutActionSuccess => {\r\n  return { type: LOGOUT_SUCCESS };\r\n};\r\n\r\nconst logoutFailed = (): TLogoutActionFailed => {\r\n  return { type: LOGOUT_FAILED };\r\n};\r\n\r\nconst getUserRequest = (): TGetUserActionRequest => {\r\n  return { type: GET_USER_REQUEST };\r\n};\r\n\r\nconst getUserSuccess = (user: TUser): TGetUserActionSuccess => {\r\n  return { type: GET_USER_SUCCESS, payload: user };\r\n};\r\n\r\nconst getUserFailed = (): TGetUserActionFailed => {\r\n  return { type: GET_USER_FAILED };\r\n};\r\n\r\nconst updateUserRequest = (): TUpdateUserActionRequest => {\r\n  return { type: USER_UPDATE_REQUEST };\r\n};\r\n\r\nconst updateUserSuccess = (user: TUser): TUpdateUserActionSuccess => {\r\n  return { type: USER_UPDATE_SUCCESS, payload: user };\r\n};\r\n\r\nconst updateUserFailed = (): TUpdateUserActionFailed => {\r\n  return { type: USER_UPDATE_FAILED };\r\n};\r\n\r\nexport const register: AppThunk =\r\n  ({ email, password, name, history }) =>\r\n  (dispatch: AppDispatch) => {\r\n    dispatch(registerRequest());\r\n    fetch(`${MAIN_API}/auth/register`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        email: email,\r\n        password: password,\r\n        name: name\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.ok) return res.json();\r\n        else return res.json().then(err => Promise.reject(err));\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          dispatch(registerSuccess());\r\n          history.push('/login');\r\n        } else Promise.reject(res);\r\n      })\r\n      .catch(() => dispatch(registerFailed()));\r\n  };\r\n\r\nexport const login: AppThunk =\r\n  ({ email, password, history }) =>\r\n  (dispatch: AppDispatch) => {\r\n    dispatch(loginRequest());\r\n    fetch(`${MAIN_API}/auth/login`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        email: email,\r\n        password: password\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.ok) return res.json();\r\n        else return res.json().then(err => Promise.reject(err));\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          const accessToken = res.accessToken.split('Bearer ')[1];\r\n          setCookies('accessToken', accessToken);\r\n          setCookies('refreshToken', res.refreshToken);\r\n          dispatch(loginSuccess(res.user));\r\n          history.push('/');\r\n        } else Promise.reject(res);\r\n      })\r\n      .catch(() => dispatch(loginFailed()));\r\n  };\r\n\r\nexport const refresh = (): Promise<TRefresh> => {\r\n  console.log('refresh');\r\n  const refreshToken = getCookie('refreshToken');\r\n  return fetch(`${MAIN_API}/auth/token`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      token: `${refreshToken}`\r\n    })\r\n  }).then(res => {\r\n    if (res.ok) return res.json();\r\n    else return res.json().then(err => Promise.reject(err));\r\n  });\r\n};\r\n\r\nexport const logout: AppThunk = () => (dispatch: AppDispatch) => {\r\n  const refreshToken = getCookie('refreshToken');\r\n  dispatch(logoutRequest());\r\n  fetch(`${MAIN_API}/auth/logout`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      token: `${refreshToken}`\r\n    })\r\n  })\r\n    .then(res => {\r\n      if (res.ok) return res.json();\r\n      else return res.json().then(err => Promise.reject(err));\r\n    })\r\n    .then(res => {\r\n      if (res.success) {\r\n        deleteCookies('accessToken');\r\n        deleteCookies('refreshToken');\r\n        dispatch(logoutSuccess());\r\n      } else Promise.reject(res);\r\n    })\r\n    .catch(() => dispatch(logoutFailed()));\r\n};\r\n\r\nexport const getUser: AppThunk = () => (dispatch: AppDispatch) => {\r\n  const accessToken = getCookie('accessToken');\r\n  dispatch(getUserRequest());\r\n  retriableFetch<TRes>(`${MAIN_API}/auth/user`, {\r\n    headers: {\r\n      'Content-type': 'application/json',\r\n      authorization: `Bearer ${accessToken}`\r\n    }\r\n  })\r\n    .then(res => {\r\n      if (res.success) dispatch(getUserSuccess(res.user!));\r\n      else Promise.reject(res);\r\n    })\r\n    .catch(() => dispatch(getUserFailed()));\r\n};\r\n\r\nexport const updateUser: AppThunk =\r\n  ({ email, password, name }) =>\r\n  (dispatch: AppDispatch) => {\r\n    const accessToken = getCookie('accessToken');\r\n    dispatch(updateUserRequest());\r\n    retriableFetch<TRes>(`${MAIN_API}/auth/user`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n        authorization: `Bearer ${accessToken}`\r\n      },\r\n      body: JSON.stringify({\r\n        email: email,\r\n        password: password,\r\n        name: name\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.success) dispatch(updateUserSuccess(res.user!));\r\n        else Promise.reject(res);\r\n      })\r\n      .catch(() => dispatch(updateUserFailed()));\r\n  };\r\n","import { refresh } from '../services/actions/user';\r\n\r\nexport const MAIN_API = 'https://norma.nomoreparties.space/api';\r\nexport const WS_Url = 'wss://norma.nomoreparties.space/orders';\r\nexport const emailRegex =\r\n  /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\n// export const getCookie = (name: string) => {\r\n//   const cookies = document.cookie.split('; ');\r\n//   const token = cookies.find(cookie => (cookie.indexOf(name) !== -1 ? cookie : null));\r\n//   console.log(document.cookie);\r\n//   if (token === undefined) return;\r\n//   return name === 'accessToken' ? token.slice(12) : token.slice(13);\r\n// };\r\n\r\nexport const getCookie = (name: string) => {\r\n  const matches = document.cookie.match(new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)'));\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\n// export const setCookies = (data: TRefresh) => {\r\n//   document.cookie = `accessToken=${data.accessToken!.slice(7)}; path='/'; expires=Fri, 31 Dec 9999 23:59:59 GMT`;\r\n//   document.cookie = `refreshToken=${data.refreshToken}; path='/'; expires=Fri, 31 Dec 9999 23:59:59 GMT`;\r\n// };\r\n\r\nexport const setCookies = (name: string, value: string | number | boolean | null | undefined, props: any = {}) => {\r\n  props = {\r\n    path: '/',\r\n    expires: 'Fri, 31 Dec 9999 23:59:59 GMT',\r\n    ...props\r\n  };\r\n  let exp = props.expires;\r\n  if (typeof exp == 'number' && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  value = encodeURIComponent(value!);\r\n  let updatedCookie = name + '=' + value;\r\n  for (const propName in props) {\r\n    updatedCookie += '; ' + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += '=' + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n};\r\n\r\nexport const deleteCookies = (name: string) => {\r\n  setCookies(name, null, { expires: -1 });\r\n};\r\n\r\nexport const retriableFetch = async <ReturnType>(url: RequestInfo, options?: RequestInit | undefined | any): Promise<ReturnType> => {\r\n  try {\r\n    return await fetch(url, options).then(async res => {\r\n      if (res.ok) return res.json() as Promise<ReturnType>;\r\n      const err = (await res.json()) as Promise<ReturnType>;\r\n      return await Promise.reject(err);\r\n    });\r\n  } catch (err) {\r\n    if ((err as Error).message! === 'jwt expired') {\r\n      const refreshTokens = await refresh();\r\n      const accessToken = refreshTokens.accessToken!.split('Bearer ')[1];\r\n      setCookies('accessToken', accessToken);\r\n      setCookies('refreshToken', refreshTokens.refreshToken);\r\n      console.log(refreshTokens);\r\n      if (!options!.headers) {\r\n        options!.headers = {};\r\n      }\r\n      options!.headers.authorization = getCookie('accessToken');\r\n      return await fetch(url, options).then(async res => {\r\n        if (res.ok) return res.json() as Promise<ReturnType>;\r\n        const err = (await res.json()) as Promise<ReturnType>;\r\n        return await Promise.reject(err);\r\n      });\r\n    } else throw err;\r\n  }\r\n};\r\n\r\nexport const getDate = (date: string) => {\r\n  const currentDate = new Date();\r\n  if (date.slice(0, 10) === currentDate.toISOString().slice(0, 10)) return `Сегодня, ${date.slice(11, 16)} i-GMT+3`;\r\n  else return `${date.slice(0, 10)}, ${date.slice(11, 16)} i-GMT+3`;\r\n};\r\n","import { GET_ORDER_REQUEST, GET_ORDER_SUCCESS, GET_ORDER_FAILED, CLEAR_ORDER } from '../types';\r\nimport { MAIN_API, getCookie, retriableFetch } from '../../utils/constants';\r\nimport { AppThunk, AppDispatch } from '../reducers';\r\nimport { TRes } from '../../utils/types';\r\n\r\ntype TGetOrderActionRequest = { readonly type: typeof GET_ORDER_REQUEST };\r\ntype TGetOrderActionSuccess = { readonly type: typeof GET_ORDER_SUCCESS; readonly payload: number };\r\ntype TGetOrderActionFailed = { readonly type: typeof GET_ORDER_FAILED };\r\ntype TClearOrderAction = { readonly type: typeof CLEAR_ORDER };\r\n\r\nexport type TOrderActions = TGetOrderActionRequest | TGetOrderActionSuccess | TGetOrderActionFailed | TClearOrderAction;\r\n\r\nconst getOrderRequest = (): TGetOrderActionRequest => {\r\n  return { type: GET_ORDER_REQUEST };\r\n};\r\n\r\nconst getOrderSuccess = (number: number): TGetOrderActionSuccess => {\r\n  return { type: GET_ORDER_SUCCESS, payload: number };\r\n};\r\n\r\nconst getOrderFailed = (): TGetOrderActionFailed => {\r\n  return { type: GET_ORDER_FAILED };\r\n};\r\n\r\nexport const getOrder: AppThunk = itemsId => (dispatch: AppDispatch) => {\r\n  const accessToken = getCookie('accessToken');\r\n  dispatch(getOrderRequest());\r\n  retriableFetch<TRes>(`${MAIN_API}/orders`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-type': 'application/json',\r\n      authorization: `Bearer ${accessToken}`\r\n    },\r\n    body: JSON.stringify({ ingredients: itemsId })\r\n  })\r\n    .then(res => dispatch(getOrderSuccess(res.order.number)))\r\n    .catch(() => dispatch(getOrderFailed()));\r\n};\r\n\r\nexport const clearOrder = (): TClearOrderAction => {\r\n  return { type: CLEAR_ORDER };\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport { useDrop } from 'react-dnd';\r\nimport { useHistory } from 'react-router-dom';\r\nimport burgerConstructor from './BurgerConstructor.module.css';\r\nimport BurgerConstructorItem from '../BurgerConstructorItem/BurgerConstructorItem';\r\nimport { CurrencyIcon, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { getOrder } from '../../services/actions/order';\r\nimport {\r\n  addConstructorIngredient,\r\n  increaseConstructorCount,\r\n  decreaseConstructorCount,\r\n  addConstructorBun\r\n} from '../../services/actions/burgerConstructor';\r\nimport { TBurgerIngredientType } from '../../utils/types';\r\n\r\ntype TBurgerConstructorProps = {\r\n  onModalOpen: () => void;\r\n  onModalType: () => void;\r\n};\r\n\r\nconst BurgerConstructor = (props: TBurgerConstructorProps) => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { constructorBuns, constructorIngredients } = useSelector(state => state.burgerConstructor);\r\n  const { isAuth } = useSelector(state => state.user);\r\n  const summaryPrice = useMemo(() => {\r\n    let sum = 0;\r\n    constructorIngredients.forEach(item => {\r\n      if (item.type !== 'bun') sum += item.price;\r\n    });\r\n    return constructorBuns ? sum + 2 * constructorBuns.price : sum;\r\n  }, [constructorBuns, constructorIngredients]);\r\n\r\n  const handleClick = () => {\r\n    if (!isAuth) return history.replace('/login');\r\n    const itemsId = constructorIngredients.map(item => item._id);\r\n    dispatch(getOrder([...itemsId, constructorBuns!._id]));\r\n    props.onModalType();\r\n    props.onModalOpen();\r\n  };\r\n\r\n  const [{ isHover }, dropRef] = useDrop({\r\n    accept: 'ingredient',\r\n    collect: monitor => ({\r\n      isHover: monitor.isOver()\r\n    }),\r\n    drop: (item: TBurgerIngredientType) => {\r\n      if (item.type === 'bun') dispatch(addConstructorBun(item));\r\n      else dispatch(addConstructorIngredient(item));\r\n      if (constructorBuns && item.type === 'bun') {\r\n        dispatch(decreaseConstructorCount());\r\n        dispatch(increaseConstructorCount());\r\n      } else dispatch(increaseConstructorCount());\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className={`mt-25 ${burgerConstructor.content}`}>\r\n      <div style={{ border: `${isHover ? '2px solid #4c4cff' : ''}`, borderRadius: 40 }} ref={dropRef}>\r\n        {constructorBuns || constructorIngredients.length > 0 ? (\r\n          <div>\r\n            <div>\r\n              {constructorBuns ? (\r\n                <BurgerConstructorItem\r\n                  key={constructorBuns.key}\r\n                  uniqueKey={constructorBuns.key}\r\n                  image={constructorBuns.image}\r\n                  name={constructorBuns.name}\r\n                  price={constructorBuns.price}\r\n                  type='bun-top'\r\n                />\r\n              ) : (\r\n                <h2 className='text text_type_main-medium'>Добавьте булку</h2>\r\n              )}\r\n            </div>\r\n            <div className={`mt-4 pr-2 ${burgerConstructor.list}`}>\r\n              {constructorIngredients.map((item, index) => (\r\n                <BurgerConstructorItem key={item.key} index={index} uniqueKey={item.key} image={item.image} name={item.name} price={item.price} />\r\n              ))}\r\n            </div>\r\n            <div className='mt-4'>\r\n              {constructorBuns ? (\r\n                <BurgerConstructorItem\r\n                  key={constructorBuns.key}\r\n                  uniqueKey={constructorBuns.key}\r\n                  image={constructorBuns.image}\r\n                  name={constructorBuns.name}\r\n                  price={constructorBuns.price}\r\n                  type='bun-bottom'\r\n                />\r\n              ) : (\r\n                <h2 className='text text_type_main-medium'>Добавьте булку</h2>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div style={{ height: '50vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n            <h2 className={`text text_type_main-large`}>Конструктор пуст</h2>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className={`${burgerConstructor.summary} mt-10`}>\r\n        <div className={`${burgerConstructor.summaryPrice} mr-10`}>\r\n          <p className={`text text_type_main-medium mr-2 ${burgerConstructor.summaryPriceValue}`}>\r\n            {constructorBuns || constructorIngredients.length > 0 ? summaryPrice : 0}\r\n          </p>\r\n          <CurrencyIcon type='primary' />\r\n        </div>\r\n        {/* @ts-ignore */}\r\n        <Button type='primary' size='medium' onClick={handleClick} disabled={!constructorBuns}>\r\n          Оформить заказ\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructor;\r\n","import React, { ReactNode } from 'react';\r\nimport modalOverlay from './ModalOverlay.module.css';\r\n\r\ntype TModalOverlayProps = {\r\n  children: ReactNode;\r\n  onModalClose: () => void;\r\n};\r\n\r\nconst ModalOverlay = ({ children, onModalClose }: TModalOverlayProps) => {\r\n  return (\r\n    <div className={modalOverlay.overlay} onClick={e => e.target === e.currentTarget && onModalClose()}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalOverlay;\r\n","import React, { useEffect, ReactNode } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ModalOverlay from '../ModalOverlay/ModalOverlay';\r\nimport modal from './Modal.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\ntype TModalProps = {\r\n  children: ReactNode;\r\n  onModalClose: () => void;\r\n  type: string | null;\r\n};\r\n\r\nconst modalRoot: HTMLElement | null = document.getElementById('modals');\r\n\r\nconst Modal = ({ children, onModalClose, type }: TModalProps) => {\r\n  const modalHeightValue = type === 'order' ? '90%' : '70%';\r\n\r\n  const closeByEscape = (e: KeyboardEvent) => {\r\n    e.code === 'Escape' && onModalClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', closeByEscape);\r\n    return () => document.removeEventListener('keydown', closeByEscape);\r\n  }, []);\r\n\r\n  return ReactDOM.createPortal(\r\n    <ModalOverlay onModalClose={onModalClose}>\r\n      <div className={modal.modal} style={{ height: `${modalHeightValue}` }}>\r\n        <div className={modal.closeIcon} onClick={onModalClose}>\r\n          <CloseIcon type='primary' />\r\n        </div>\r\n        {children}\r\n      </div>\r\n    </ModalOverlay>,\r\n    modalRoot!\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useMemo } from 'react';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { useParams, Redirect, useLocation } from 'react-router-dom';\r\nimport ingredientDetails from './IngredientDetails.module.css';\r\n\r\nconst IngredientDetails = () => {\r\n  const location = useLocation<any>();\r\n  const { id } = useParams<{ id: string }>();\r\n  const data = useSelector(state => state.burgerIngredients.ingredients);\r\n  const { ingredientsLoaded } = useSelector(state => state.burgerIngredients);\r\n  const currentIngredient = useMemo(() => {\r\n    return data && data.find(item => item._id === id);\r\n  }, [data]);\r\n\r\n  if (!ingredientsLoaded) return null;\r\n  else if (ingredientsLoaded && !currentIngredient) return <Redirect to='/' />;\r\n  return (\r\n    <div className={ingredientDetails.container} style={{ height: `${!(location as any).state?.background && '90vh'}` }}>\r\n      <h3 className={`text text_type_main-large mt-15`}>Детали ингредиента</h3>\r\n      <img src={currentIngredient?.image_large} alt='ingredient-icon' className={ingredientDetails.image} />\r\n      <p className={`text text_type_main-medium mt-4`}>{currentIngredient?.name}</p>\r\n      <div className={`${ingredientDetails.properties} mt-8`}>\r\n        <div className={ingredientDetails.property}>\r\n          <p className='text text_type_main-default text_color_inactive'>Калории,ккал</p>\r\n          <p className='text text_type_main-default text_color_inactive'>{currentIngredient?.calories}</p>\r\n        </div>\r\n        <div className={ingredientDetails.property}>\r\n          <p className='text text_type_main-default text_color_inactive'>Белки, г</p>\r\n          <p className='text text_type_main-default text_color_inactive'>{currentIngredient?.proteins}</p>\r\n        </div>\r\n        <div className={ingredientDetails.property}>\r\n          <p className='text text_type_main-default text_color_inactive'>Жиры, г</p>\r\n          <p className='text text_type_main-default text_color_inactive'>{currentIngredient?.fat}</p>\r\n        </div>\r\n        <div className={ingredientDetails.property}>\r\n          <p className='text text_type_main-default text_color_inactive'>Углеводы, г</p>\r\n          <p className='text text_type_main-default text_color_inactive'>{currentIngredient?.carbohydrates}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IngredientDetails;\r\n","export default __webpack_public_path__ + \"static/media/done.54f842c2.png\";","import React from 'react';\r\nimport { useSelector } from '../../services/hooks';\r\nimport orderDetails from './OrderDetails.module.css';\r\nimport doneIcon from '../../images/done.png';\r\n\r\nconst OrderDetails = () => {\r\n  const { orderNumber, orderRequest } = useSelector(state => state.order);\r\n  return (\r\n    <>\r\n      {!orderRequest ? (\r\n        <div className={orderDetails.container}>\r\n          <h3 className={`text text_type_digits-large mt-30 ${orderDetails.order}`}>{orderNumber}</h3>\r\n          <p className={`text text_type_main-medium mt-8 ${orderDetails.orderIdText}`}>идентификатор заказа</p>\r\n          <img src={doneIcon} alt='done-icon' className='mt-15' style={{ width: 120, height: 120 }} />\r\n          <p className={`text text_type_main-default mt-15`}>Ваш заказ начали готовить</p>\r\n          <p className={`text text_type_main-default text_color_inactive mt-2`}>Дождитесь готовности на орбитальной станции</p>\r\n        </div>\r\n      ) : (\r\n        <div className={orderDetails.container} style={{ justifyContent: 'center' }}>\r\n          <h1 className='text text_type_main-large'>Загрузка...</h1>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n","import { GET_BURGER_INGREDIENTS_REQUEST, GET_BURGER_INGREDIENTS_SUCCESS, GET_BURGER_INGREDIENTS_FAILED } from '../types';\r\nimport { MAIN_API } from '../../utils/constants';\r\nimport { AppThunk, AppDispatch } from '../reducers';\r\nimport { TBurgerIngredientType } from '../../utils/types';\r\n\r\ntype TGetBurgerIngredientsActionRequest = { readonly type: typeof GET_BURGER_INGREDIENTS_REQUEST };\r\ntype TGetBurgerIngredientsActionSuccess = { readonly type: typeof GET_BURGER_INGREDIENTS_SUCCESS; readonly payload: Array<TBurgerIngredientType> };\r\ntype TGetBurgerIngredientsActionFailed = { readonly type: typeof GET_BURGER_INGREDIENTS_FAILED };\r\n\r\nexport type TGetBurgerIngredientsActions =\r\n  | TGetBurgerIngredientsActionRequest\r\n  | TGetBurgerIngredientsActionSuccess\r\n  | TGetBurgerIngredientsActionFailed;\r\n\r\nconst getBurgerIngredientsRequest = (): TGetBurgerIngredientsActionRequest => {\r\n  return { type: GET_BURGER_INGREDIENTS_REQUEST };\r\n};\r\n\r\nconst getBurgerIngredientsSuccess = (data: Array<TBurgerIngredientType>): TGetBurgerIngredientsActionSuccess => {\r\n  return { type: GET_BURGER_INGREDIENTS_SUCCESS, payload: data };\r\n};\r\n\r\nconst getBurgerIngredientsFailed = (): TGetBurgerIngredientsActionFailed => {\r\n  return { type: GET_BURGER_INGREDIENTS_FAILED };\r\n};\r\n\r\nexport const getBurgerIngredients: AppThunk = () => (dispatch: AppDispatch) => {\r\n  dispatch(getBurgerIngredientsRequest());\r\n  fetch(`${MAIN_API}/ingredients`)\r\n    .then(res => {\r\n      if (res.ok) return res.json();\r\n      else return Promise.reject();\r\n    })\r\n    .then(res => dispatch(getBurgerIngredientsSuccess(res.data)))\r\n    .catch(() => dispatch(getBurgerIngredientsFailed()));\r\n};\r\n","import React, { useState, useEffect, ChangeEvent, FormEvent } from 'react';\r\nimport { Link, useHistory, Redirect, useLocation } from 'react-router-dom';\r\nimport { PasswordInput, EmailInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport loginStyles from './Login.module.css';\r\nimport { login } from '../../services/actions/user';\r\n\r\nexport const Login = () => {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const dispatch = useDispatch();\r\n  const { isAuth, getUserRequest } = useSelector(state => state.user);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'email' ? setEmail(target.value) : setPassword(target.value);\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(login({ email: email, password: password, history: history }));\r\n  };\r\n\r\n  if (getUserRequest) return null;\r\n  else if (!getUserRequest && isAuth) return <Redirect to={(location as any).state?.from || '/profile'} />;\r\n\r\n  return (\r\n    <main className={loginStyles.section}>\r\n      <div className={loginStyles.content}>\r\n        <form onSubmit={onSubmit} noValidate className={loginStyles.form}>\r\n          <h2 className='text text_type_main-large'>Вход</h2>\r\n          <EmailInput name='email' value={email || ''} onChange={onChange} />\r\n          <PasswordInput name='password' value={password || ''} onChange={onChange} />\r\n          {/* @ts-ignore */}\r\n          <Button type='primary' size='medium' disabled={!email || !password}>\r\n            Вход\r\n          </Button>\r\n        </form>\r\n        <div>\r\n          <div className='text text_type_main-default text_color_inactive'>\r\n            <span>Вы — новый пользователь?</span>\r\n            <Link to='/register' className={`${loginStyles.link} ml-2`}>\r\n              Зарегистрироваться\r\n            </Link>\r\n          </div>\r\n          <div className='text text_type_main-default text_color_inactive'>\r\n            <span>Забыли пароль?</span>\r\n            <Link to='/forgot-password' className={`${loginStyles.link} ml-2`}>\r\n              Восстановить пароль\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n","import React, { useState, useEffect, ChangeEvent, FormEvent } from 'react';\r\nimport { Link, useHistory, useLocation, Redirect } from 'react-router-dom';\r\nimport { PasswordInput, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport registerStyles from './Register.module.css';\r\nimport { emailRegex } from '../../utils/constants';\r\nimport { register } from '../../services/actions/user';\r\n\r\nexport const Register = () => {\r\n  const dispatch = useDispatch();\r\n  const { user, isAuth, getUserRequest, errorText, registerError } = useSelector(state => state.user);\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [emailError, setEmailError] = useState(false);\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'email' ? setEmail(target.value) : target.name === 'username' ? setUsername(target.value) : setPassword(target.value);\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(register({ email: email, name: username, password: password, history: history }));\r\n  };\r\n\r\n  useEffect(() => (email.length > 0 && !email.match(emailRegex) ? setEmailError(true) : setEmailError(false)), [email]);\r\n\r\n  if (getUserRequest) return null;\r\n  else if (!getUserRequest && isAuth) return <Redirect to={(location as any).state?.from || '/profile'} />;\r\n\r\n  return (\r\n    <main className={registerStyles.section}>\r\n      <div className={registerStyles.content}>\r\n        <form onSubmit={onSubmit} noValidate className={registerStyles.form}>\r\n          <h2 className='text text_type_main-large'>Регистрация</h2>\r\n          <Input type='text' placeholder='Имя' name='username' value={username || ''} onChange={onChange} />\r\n          <Input\r\n            type='email'\r\n            placeholder='E-mail'\r\n            name='email'\r\n            value={email || ''}\r\n            onChange={onChange}\r\n            error={emailError}\r\n            errorText={'Некорректный email'}\r\n          />\r\n          <PasswordInput name='password' value={password || ''} onChange={onChange} />\r\n          {/* @ts-ignore */}\r\n          <Button type='primary' size='medium' disabled={!email || emailError || !password || !username || registerError}>\r\n            Зарегистрироваться\r\n          </Button>\r\n          <p className='text text_type_main-small mt-2' style={{ color: 'red' }}>\r\n            {errorText === 'Ошибка при регистрации' && errorText}\r\n          </p>\r\n        </form>\r\n        <div>\r\n          <div className='text text_type_main-default text_color_inactive'>\r\n            <span>Уже зарегистрированы?</span>\r\n            <Link to='/login' className={`${registerStyles.link} ml-2`}>\r\n              Войти\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n","import React, { useState, useEffect, ChangeEvent, FormEvent } from 'react';\r\nimport { Link, useHistory, useLocation, Redirect } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useSelector } from '../../services/hooks';\r\nimport forgotPassword from './ForgotPassword.module.css';\r\nimport { MAIN_API, emailRegex } from '../../utils/constants';\r\n\r\nexport const ForgotPassword = () => {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const { isAuth, getUserRequest } = useSelector(state => state.user);\r\n  const [email, setEmail] = useState('');\r\n  const [emailError, setEmailError] = useState(false);\r\n  const errorText = 'Некорректный email';\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'email' && setEmail(target.value);\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    fetch(`${MAIN_API}/password-reset`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email: email })\r\n    })\r\n      .then(res => {\r\n        if (res.ok) return res.json();\r\n        else setEmailError(true);\r\n      })\r\n      .then(res => {\r\n        if (res.success) history.replace('/reset-password', { forgotPageVisited: true });\r\n        else setEmailError(true);\r\n      })\r\n      .catch(() => setEmailError(true));\r\n  };\r\n\r\n  useEffect(() => (history as any).replace({ forgotPageVisited: false }), []);\r\n  useEffect(() => (email.length > 0 && !email.match(emailRegex) ? setEmailError(true) : setEmailError(false)), [email]);\r\n\r\n  if (getUserRequest) return null;\r\n  else if (!getUserRequest && isAuth) return <Redirect to={(location as any).state?.from || '/profile'} />;\r\n\r\n  return (\r\n    <main className={forgotPassword.section}>\r\n      <div className={forgotPassword.content}>\r\n        <form onSubmit={onSubmit} noValidate className={forgotPassword.form}>\r\n          <h2 className='text text_type_main-large'>Восстановление пароля</h2>\r\n          <Input\r\n            type='email'\r\n            placeholder='Укажите e-mail'\r\n            name='email'\r\n            value={email || ''}\r\n            onChange={onChange}\r\n            error={emailError}\r\n            errorText={errorText}\r\n          />\r\n          {/* @ts-ignore */}\r\n          <Button type='primary' size='medium' disabled={!email || emailError}>\r\n            Восстановить\r\n          </Button>\r\n        </form>\r\n        <div>\r\n          <div className='text text_type_main-default text_color_inactive'>\r\n            <span>Вспомнили пароль?</span>\r\n            <Link to='/login' className={`${forgotPassword.link} ml-2`}>\r\n              Войти\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n","import React, { useState, useRef, ChangeEvent, FormEvent } from 'react';\r\nimport { Link, useHistory, useLocation, Redirect } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useSelector } from '../../services/hooks';\r\nimport resetPassword from './ResetPassword.module.css';\r\nimport { MAIN_API } from '../../utils/constants';\r\n\r\nexport const ResetPassword = () => {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const { isAuth, getUserRequest } = useSelector(state => state.user);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [code, setCode] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const passwordRef = useRef<HTMLInputElement>(null);\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'code' ? setCode(target.value) : setPassword(target.value);\r\n  };\r\n\r\n  const onIconClick = () => {\r\n    setShowPassword(!showPassword);\r\n    if (!showPassword) setTimeout(() => passwordRef.current?.focus(), 0);\r\n  };\r\n\r\n  const handlePasswordOverlayClick = (e: any) => {\r\n    if (showPassword && e.currentTarget.classList.value !== 'input__icon input__icon-action') setShowPassword(!showPassword);\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    fetch(`${MAIN_API}/password-reset/reset`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ password: password, token: code })\r\n    })\r\n      .then(res => {\r\n        if (res.ok) return res.json();\r\n        else alert('ERROR');\r\n      })\r\n      .then(res => {\r\n        if (res.success) history.replace('/login', { forgotPageVisited: false });\r\n        else alert('ERROR');\r\n      })\r\n      .catch(err => alert(err));\r\n  };\r\n\r\n  if (getUserRequest) return null;\r\n  else if (!getUserRequest && isAuth) {\r\n    return <Redirect to={(location as any).state?.from || '/profile'} />;\r\n  } else if (!(location as any).state?.forgotPageVisited) return <Redirect to={'/forgot-password'} />;\r\n\r\n  return (\r\n    <main className={resetPassword.section} onClick={handlePasswordOverlayClick}>\r\n      <div className={resetPassword.content}>\r\n        <form onSubmit={onSubmit} noValidate className={resetPassword.form}>\r\n          <h2 className='text text_type_main-large'>Восстановление пароля</h2>\r\n          <div className={showPassword ? resetPassword.hideInput : ''}>\r\n            <Input\r\n              type='password'\r\n              placeholder='Введите новый пароль'\r\n              name='password'\r\n              value={password || ''}\r\n              icon='ShowIcon'\r\n              onChange={onChange}\r\n              onIconClick={onIconClick}\r\n              //   ref={passwordRef}\r\n            />\r\n          </div>\r\n          <div className={!showPassword ? resetPassword.hideInput : ''}>\r\n            <Input\r\n              type='text'\r\n              placeholder='Введите новый пароль'\r\n              name='password'\r\n              value={password || ''}\r\n              icon='HideIcon'\r\n              onChange={onChange}\r\n              onIconClick={onIconClick}\r\n              ref={passwordRef}\r\n            />\r\n          </div>\r\n          <Input type='text' placeholder='Введите код из письма' name='code' value={code || ''} onChange={onChange} />\r\n          {/* @ts-ignore */}\r\n          <Button type='primary' size='medium' disabled={!password || !code}>\r\n            Восстановить\r\n          </Button>\r\n        </form>\r\n        <div>\r\n          <div className='text text_type_main-default text_color_inactive'>\r\n            <span>Вспомнили пароль?</span>\r\n            <Link to='/login' className={`${resetPassword.link} ml-2`}>\r\n              Войти\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n","import React, { useRef, useState, ChangeEvent, FocusEvent } from 'react';\r\nimport { Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { TCustomInputProps } from '../../utils/types';\r\n\r\nexport const PasswordInput = ({ value, onChange, name, placeholder, size = 'default' }: TCustomInputProps) => {\r\n  const [fieldDisabled, setDisabled] = useState(true);\r\n  const [visible, setVisible] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const onIconClick = () => {\r\n    setDisabled(false);\r\n    setVisible(true);\r\n    setTimeout(() => inputRef.current?.focus(), 0);\r\n  };\r\n\r\n  const validateField = (value: string) => {\r\n    setError(value.length < 6);\r\n  };\r\n\r\n  const onFocus = () => {\r\n    setError(false);\r\n  };\r\n\r\n  const onBlur = (e?: FocusEvent<HTMLInputElement, Element> | undefined): void => {\r\n    if (e?.target.value) {\r\n      validateField(e.target.value);\r\n    } else {\r\n      setError(false);\r\n    }\r\n    setDisabled(true);\r\n    setVisible(false);\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      type={visible ? 'text' : 'password'}\r\n      placeholder={placeholder}\r\n      onChange={onChange}\r\n      icon={visible ? 'CloseIcon' : 'EditIcon'}\r\n      value={value}\r\n      ref={inputRef}\r\n      onBlur={onBlur}\r\n      onFocus={onFocus}\r\n      name={name}\r\n      error={error}\r\n      onIconClick={onIconClick}\r\n      errorText={'Некорректный пароль'}\r\n      size={size}\r\n      disabled={fieldDisabled}\r\n    />\r\n  );\r\n};\r\n","import React, { useRef, useState, ChangeEvent, FocusEvent } from 'react';\r\nimport { Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { TCustomInputProps } from '../../utils/types';\r\n\r\nconst validateEmail = (email: string) => {\r\n  const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return re.test(email);\r\n};\r\n\r\nexport const EmailInput = ({ value, onChange, name, placeholder, size = 'default' }: TCustomInputProps) => {\r\n  const [fieldDisabled, setDisabled] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const onIconClick = () => {\r\n    setDisabled(false);\r\n    setTimeout(() => inputRef.current?.focus(), 0);\r\n  };\r\n\r\n  const validateField = (value: string) => {\r\n    setError(!validateEmail(value));\r\n  };\r\n\r\n  const onFocus = () => {\r\n    setError(false);\r\n  };\r\n\r\n  const onBlur = (e?: FocusEvent<HTMLInputElement, Element> | undefined): void => {\r\n    if (e?.target.value) {\r\n      validateField(e.target.value);\r\n    } else {\r\n      setError(false);\r\n    }\r\n    setDisabled(true);\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      type='email'\r\n      placeholder={placeholder}\r\n      onChange={onChange}\r\n      icon={!fieldDisabled ? 'CloseIcon' : 'EditIcon'}\r\n      value={value}\r\n      ref={inputRef}\r\n      onBlur={onBlur}\r\n      onFocus={onFocus}\r\n      name={name}\r\n      error={error}\r\n      disabled={fieldDisabled}\r\n      onIconClick={onIconClick}\r\n      errorText={'Ой, произошла ошибка!'}\r\n      size={size}\r\n    />\r\n  );\r\n};\r\n","import React, { useRef, useState, ChangeEvent } from 'react';\r\nimport { Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { TCustomInputProps } from '../../utils/types';\r\n\r\nexport const NameInput = ({ value, onChange, name, placeholder, size = 'default' }: TCustomInputProps) => {\r\n  const [fieldDisabled, setDisabled] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const onIconClick = () => {\r\n    setDisabled(false);\r\n    setTimeout(() => inputRef.current?.focus(), 0);\r\n  };\r\n\r\n  const onFocus = () => {\r\n    setError(false);\r\n  };\r\n\r\n  const onBlur = () => {\r\n    setDisabled(true);\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      type='text'\r\n      placeholder={placeholder}\r\n      onChange={onChange}\r\n      icon={!fieldDisabled ? 'CloseIcon' : 'EditIcon'}\r\n      value={value}\r\n      ref={inputRef}\r\n      onBlur={onBlur}\r\n      onFocus={onFocus}\r\n      name={name}\r\n      error={error}\r\n      disabled={fieldDisabled}\r\n      onIconClick={onIconClick}\r\n      errorText={'Ой, произошла ошибка!'}\r\n      size={size}\r\n    />\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/ingredients.e82b11a4.png\";","import React, { useMemo } from 'react';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useSelector } from '../../services/hooks';\r\nimport orderCard from './OrderCard.module.css';\r\nimport tempImage from '../../images/ingredients.png';\r\nimport { TOrder } from '../../utils/types';\r\nimport { getDate } from '../../utils/constants';\r\n\r\nexport const OrderCard = (props: TOrder) => {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const { ingredients } = useSelector(state => state.burgerIngredients);\r\n  const orderSum = useMemo(() => {\r\n    let sum = 0;\r\n    const prop = props.ingredients;\r\n    ingredients!.forEach(item => {\r\n      for (let i = 0; i < prop.length; i++) {\r\n        if (item._id === prop[i]) sum += item.price;\r\n      }\r\n    });\r\n    return sum;\r\n  }, [ingredients, props.ingredients]);\r\n\r\n  const handleClick = () => {\r\n    if (location.pathname === '/feed') history.replace({ pathname: `/feed/${props._id}`, state: { backgroundForFeed: location } });\r\n    if (location.pathname === '/profile/orders')\r\n      history.replace({ pathname: `/profile/orders/${props._id}`, state: { backgroundForProfile: location } });\r\n  };\r\n\r\n  return (\r\n    <div className={orderCard.card} onClick={handleClick}>\r\n      <div className={orderCard.numberInfo}>\r\n        <p className='text text_type_main-medium'>{`#${props.number}`}</p>\r\n        <p className='text text_type_main-small text_color_inactive'>{getDate(props.createdAt)}</p>\r\n      </div>\r\n      <p className='text text_type_main-medium'>{props.name}</p>\r\n      {location.pathname === '/profile/orders' && (\r\n        <p className='text text_type_main-small' style={{ color: `${props.status === 'done' && '#00cccc'}` }}>\r\n          {props.status}\r\n        </p>\r\n      )}\r\n      <div className={orderCard.detailsInfo}>\r\n        <img src={tempImage} alt='tempOrder' />\r\n        <div className={orderCard.cost}>\r\n          <p className='text text_type_main-medium mr-2'>{orderSum}</p>\r\n          <CurrencyIcon type='primary' />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState, ChangeEvent } from 'react';\r\nimport { NavLink, useHistory, Switch, Route } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport { Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport profile from './Profile.module.css';\r\nimport { updateUser, logout } from '../../services/actions/user';\r\nimport { PasswordInput } from '../../components/CustomInputs/PasswordInput';\r\nimport { EmailInput } from '../../components/CustomInputs/EmailInput';\r\nimport { NameInput } from '../../components/CustomInputs/NameInput';\r\nimport { OrderCard } from '../../components/OrderCard/OrderCard';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from '../../services/types';\r\nimport { getCookie, WS_Url } from '../../utils/constants';\r\n\r\nexport const Profile = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const accessToken = getCookie('accessToken');\r\n  const user = useSelector(state => state.user);\r\n  const { orders } = useSelector(state => state.orders);\r\n  const [email, setEmail] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [password, setPassword] = useState('Batradz777');\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'email' ? setEmail(target.value) : target.name === 'name' ? setName(target.value) : setPassword(target.value);\r\n  };\r\n\r\n  const cancelClick = () => {\r\n    setEmail(user.user!.email);\r\n    setName(user.user!.name);\r\n    setPassword('Batradz777');\r\n  };\r\n\r\n  const exitClick = () => {\r\n    dispatch(logout());\r\n    history.replace('/login');\r\n  };\r\n\r\n  const saveUserInfo = () => {\r\n    if (email !== user.user!.email || name !== user.user!.name) dispatch(updateUser({ email: email, name: name, password: password }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: WS_CONNECTION_START, payload: `${WS_Url}/all?token=${accessToken}` });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, [accessToken, dispatch]);\r\n\r\n  useEffect(() => {\r\n    setEmail(user.user!.email);\r\n    setName(user.user!.name);\r\n  }, [user.user]);\r\n\r\n  return (\r\n    <main className={profile.main}>\r\n      <div className={profile.content}>\r\n        <div className={`${profile.navColumn}`}>\r\n          <nav className={profile.navBar}>\r\n            <NavLink exact to='/profile' className={`text text_type_main-large ${profile.navLink} pt-2 pb-2`} activeClassName={profile.activeNavLink}>\r\n              Профиль\r\n            </NavLink>\r\n            <NavLink\r\n              to='/profile/orders'\r\n              className={`text text_type_main-large ${profile.navLink} pt-2 pb-2`}\r\n              activeClassName={profile.activeNavLink}>\r\n              История заказов\r\n            </NavLink>\r\n            <NavLink\r\n              to='/profile/exit'\r\n              className={`text text_type_main-large ${profile.navLink} pt-2 pb-2`}\r\n              activeClassName={profile.activeNavLink}\r\n              onClick={exitClick}>\r\n              Выход\r\n            </NavLink>\r\n          </nav>\r\n          <p className={`text text_type_main-small text_color_inactive ${profile.navText}`}>\r\n            В этом разделе вы можете изменить свои персональные данные\r\n          </p>\r\n        </div>\r\n        <Switch>\r\n          <Route path='/profile' exact>\r\n            <div className={profile.profileColumn}>\r\n              <div className={profile.profileInfo}>\r\n                <NameInput placeholder='Имя' name='name' value={name} onChange={onChange} />\r\n                <EmailInput placeholder='Логин' name='email' value={email} onChange={onChange} />\r\n                <PasswordInput placeholder='Пароль' name='password' value={password} onChange={onChange} />\r\n                <div style={{ width: '100%', display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\r\n                  <Button size='medium' type='secondary' onClick={cancelClick}>\r\n                    Отмена\r\n                  </Button>\r\n                  <Button size='medium' type='primary' onClick={saveUserInfo}>\r\n                    Сохранить\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Route>\r\n          <Route path='/profile/orders'>\r\n            <div style={{ width: '70%' }}>\r\n              <div className={profile.ordersList}>\r\n                {orders.map(order => (\r\n                  <OrderCard\r\n                    key={order._id}\r\n                    _id={order._id}\r\n                    createdAt={order.createdAt}\r\n                    updatedAt={order.updatedAt}\r\n                    status={order.status}\r\n                    number={order.number}\r\n                    name={order.name}\r\n                    ingredients={order.ingredients}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport feed from './Feed.module.css';\r\nimport { OrderCard } from '../../components/OrderCard/OrderCard';\r\nimport { useSelector, useDispatch } from '../../services/hooks';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from '../../services/types';\r\nimport { WS_Url } from '../../utils/constants';\r\n\r\nexport const Feed = () => {\r\n  const dispatch = useDispatch();\r\n  const { total, totalToday, orders } = useSelector(state => state.orders);\r\n\r\n  const doneOrders = useMemo(() => {\r\n    return orders.filter(item => item.status === 'done').slice(0, 5);\r\n  }, [orders]);\r\n\r\n  const pendingOrders = useMemo(() => {\r\n    return orders.filter(item => item.status === 'pending').slice(0, 10);\r\n  }, [orders]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: WS_CONNECTION_START, payload: `${WS_Url}/all` });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className={feed.main}>\r\n      <div style={{ width: '87%' }}>\r\n        <p className='text text_type_main-medium'>Лента заказов</p>\r\n      </div>\r\n      <div className={feed.content}>\r\n        <div className={feed.feed}>\r\n          <div className={feed.ordersList}>\r\n            {orders.map(order => (\r\n              <OrderCard\r\n                key={order._id}\r\n                _id={order._id}\r\n                createdAt={order.createdAt}\r\n                updatedAt={order.updatedAt}\r\n                status={order.status}\r\n                number={order.number}\r\n                name={order.name}\r\n                ingredients={order.ingredients}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className={feed.orders}>\r\n          <div className={feed.ordersNumbers}>\r\n            <div className={feed.ordersReady}>\r\n              <p className='text text_type_main-medium'>Готовы:</p>\r\n              <div>\r\n                {doneOrders.map(item => (\r\n                  <p key={Math.random()} className={`text text_type_digits-default ${feed.colorfulDigits}`}>\r\n                    {item.number}\r\n                  </p>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            <div className={feed.ordersInWork}>\r\n              <p className='text text_type_main-medium'>В работе:</p>\r\n              <div>\r\n                {pendingOrders.map(item => (\r\n                  <p key={Math.random()} className='text text_type_digits-default'>\r\n                    {item.number}\r\n                  </p>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <p className='text text_type_main-medium'>Выполнено за все время:</p>\r\n            <p className={`text text_type_digits-large ${feed.largeDigits}`}>{total}</p>\r\n          </div>\r\n          <div>\r\n            <p className='text text_type_main-medium'>Выполнено за сегодня:</p>\r\n            <p className={`text text_type_digits-large ${feed.largeDigits}`}>{totalToday}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { ReactNode } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { useSelector } from '../../services/hooks';\r\n\r\ntype TProtectedRouteProps = {\r\n  children: ReactNode;\r\n  path: string;\r\n};\r\n\r\nexport const ProtectedRoute = ({ children, ...rest }: TProtectedRouteProps) => {\r\n  const { isAuth, getUserRequest } = useSelector(state => state.user);\r\n\r\n  if (getUserRequest) return null;\r\n  return <Route {...rest} render={({ location }) => (isAuth ? children : <Redirect to={{ pathname: '/login', state: { from: location } }} />)} exact />;\r\n};\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport { useParams, useLocation } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from '../../services/hooks';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport feedDetails from './FeedDetails.module.css';\r\nimport { TBurgerIngredientType } from '../../utils/types';\r\nimport { getDate, WS_Url } from '../../utils/constants';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from '../../services/types';\r\n\r\nexport const FeedDetails = () => {\r\n  const location = useLocation<any>();\r\n  const { id } = useParams<{ id: string }>();\r\n  const dispatch = useDispatch();\r\n  const backgroundForFeed = location.state?.backgroundForFeed;\r\n  const backgroundForProfile = location.state?.backgroundForProfile;\r\n  const { orders } = useSelector(state => state.orders);\r\n  const { ingredients } = useSelector(state => state.burgerIngredients);\r\n\r\n  const order = useMemo(() => {\r\n    return orders.find(item => item._id === id);\r\n  }, [id, orders]);\r\n\r\n  const ingredientsInfo = (ingredients: Array<TBurgerIngredientType> | null) => {\r\n    let result: Array<TBurgerIngredientType> = [];\r\n    order?.ingredients.map(item => {\r\n      ingredients!.forEach(element => {\r\n        if (element._id === item) result.push(element);\r\n      });\r\n    });\r\n    return result;\r\n  };\r\n\r\n  const ingredientsInOrder = ingredientsInfo(ingredients);\r\n  const orderPrice = useMemo(() => {\r\n    let price: number = 0;\r\n    ingredientsInOrder.forEach(item => (price += item.price));\r\n    return price;\r\n  }, [ingredientsInOrder]);\r\n\r\n  useEffect(() => {\r\n    if (!location.state) dispatch({ type: WS_CONNECTION_START, payload: `${WS_Url}/all` });\r\n    return () => {\r\n      if (!location.state) dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, []);\r\n\r\n  if (!order) return null;\r\n  return (\r\n    <div style={{ width: '100%', height: '90vh', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}>\r\n      <div\r\n        style={{\r\n          width: `${backgroundForFeed || backgroundForProfile ? '80%' : '35%'}`,\r\n          height: '80vh',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'space-between'\r\n        }}>\r\n        <p className='text text_type_digits-default' style={{ textAlign: 'center' }}>{`#${order?.number}`}</p>\r\n        <div>\r\n          <p className='text text_type_main-medium'>{order?.name}</p>\r\n          <p className='text text_type_main-small' style={{ color: '#00CCCC' }}>\r\n            {order?.status}\r\n          </p>\r\n        </div>\r\n        <p className='text text_type_main-medium'>Состав:</p>\r\n        <div className={feedDetails.list}>\r\n          {ingredientsInOrder.map(item => (\r\n            <div key={item._id + Math.random()} style={{ width: '95%', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n              <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                <img src={item.image_mobile} alt='ingredientLogo' style={{ width: 64, height: 64 }} />\r\n                <span className='text text_type_main-small'>{item.name}</span>\r\n              </div>\r\n              <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                <p className={`text text_type_main-medium mr-2`}>{item.price}</p>\r\n                <CurrencyIcon type='primary' />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div style={{ width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <p className='text text_type_main-small text_color_inactive'>{getDate(order!.createdAt)}</p>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <p className={`text text_type_main-medium mr-2`}>{orderPrice}</p>\r\n            <CurrencyIcon type='primary' />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useDispatch } from '../../services/hooks';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { Switch, Route, useHistory, useLocation } from 'react-router-dom';\r\nimport AppHeader from '../AppHeader/AppHeader';\r\nimport BurgerIngredients from '../BurgerIngredients/BurgerIngredients';\r\nimport BurgerConstructor from '../BurgerConstructor/BurgerConstructor';\r\nimport Modal from '../Modal/Modal';\r\nimport IngredientDetails from '../IngredientDetails/IngredientDetails';\r\nimport OrderDetails from '../OrderDetails/OrderDetails';\r\nimport appStyles from './App.module.css';\r\nimport { getBurgerIngredients } from '../../services/actions/burgerIngredients';\r\nimport { clearOrder } from '../../services/actions/order';\r\nimport { Login } from '../../pages/Login/Login';\r\nimport { Register } from '../../pages/Register/Register';\r\nimport { ForgotPassword } from '../../pages/ForgotPassword/ForgotPassword';\r\nimport { ResetPassword } from '../../pages/ResetPassword/ResetPassword';\r\nimport { Profile } from '../../pages/Profile/Profile';\r\nimport { Feed } from '../../pages/Feed/Feed';\r\nimport { getUser } from '../../services/actions/user';\r\nimport { getCookie } from '../../utils/constants';\r\nimport { ProtectedRoute } from '../ProtectedRoute/ProtectedRoute';\r\nimport { GET_USER_FAILED } from '../../services/types';\r\nimport { FeedDetails } from '../../pages/FeedDetails/FeedDetails';\r\n\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const backgroundForIngredient = location.state?.backgroundForIngredient;\r\n  const backgroundForFeed = location.state?.backgroundForFeed;\r\n  const backgroundForProfile = location.state?.backgroundForProfile;\r\n  const [modalDisplay, setModalDisplay] = useState<boolean>(false);\r\n  const [modalType, setModalType] = useState<string | null>(null);\r\n\r\n  const handleOpenModal = useCallback(() => {\r\n    setModalDisplay(true);\r\n  }, []);\r\n\r\n  const handleCloseModal = useCallback(() => {\r\n    setModalDisplay(false);\r\n    if (modalType === 'order') {\r\n      dispatch(clearOrder());\r\n      setModalType(null);\r\n    }\r\n    if (backgroundForIngredient) history.replace(backgroundForIngredient);\r\n    if (backgroundForFeed) history.replace(backgroundForFeed);\r\n    if (backgroundForProfile) history.replace(backgroundForProfile);\r\n  }, [modalType, backgroundForIngredient, history, backgroundForFeed, backgroundForProfile, dispatch]);\r\n\r\n  const handleSetOrderType = React.useCallback(() => {\r\n    setModalType('order');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (getCookie('accessToken')) dispatch(getUser());\r\n    else dispatch({ type: GET_USER_FAILED });\r\n    dispatch(getBurgerIngredients());\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {modalDisplay && (\r\n        <Modal onModalClose={handleCloseModal} type={modalType}>\r\n          <OrderDetails />\r\n        </Modal>\r\n      )}\r\n      <AppHeader />\r\n      <Switch location={backgroundForIngredient ?? backgroundForFeed ?? backgroundForProfile ?? location}>\r\n        <Route path='/' exact>\r\n          <main className={appStyles.main}>\r\n            <div className={appStyles.content}>\r\n              <DndProvider backend={HTML5Backend}>\r\n                <BurgerIngredients />\r\n                <BurgerConstructor onModalOpen={handleOpenModal} onModalType={handleSetOrderType} />\r\n              </DndProvider>\r\n            </div>\r\n          </main>\r\n        </Route>\r\n        <Route path='/feed' exact>\r\n          <Feed />\r\n        </Route>\r\n        <Route path='/feed/:id'>\r\n          <FeedDetails />\r\n        </Route>\r\n        <Route path='/profile/orders/:id'>\r\n          <FeedDetails />\r\n        </Route>\r\n        <Route path='/login' exact>\r\n          <Login />\r\n        </Route>\r\n        <Route path='/register' exact>\r\n          <Register />\r\n        </Route>\r\n        <Route path='/forgot-password' exact>\r\n          <ForgotPassword />\r\n        </Route>\r\n        <Route path='/reset-password' exact>\r\n          <ResetPassword />\r\n        </Route>\r\n        <ProtectedRoute path='/profile'>\r\n          <Profile />\r\n        </ProtectedRoute>\r\n        <Route path='/ingredients/:id'>\r\n          <IngredientDetails />\r\n        </Route>\r\n      </Switch>\r\n      {backgroundForIngredient && (\r\n        <Route path='/ingredients/:id'>\r\n          <Modal onModalClose={handleCloseModal} type={'ingredient'}>\r\n            <IngredientDetails />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n      {backgroundForFeed && (\r\n        <Route path='/feed/:id'>\r\n          <Modal onModalClose={handleCloseModal} type={'order'}>\r\n            <FeedDetails />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n      {backgroundForProfile && (\r\n        <Route path='/profile/orders/:id'>\r\n          <Modal onModalClose={handleCloseModal} type={'order'}>\r\n            <FeedDetails />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { TOrderActions } from '../actions/order';\r\nimport { GET_ORDER_REQUEST, GET_ORDER_SUCCESS, GET_ORDER_FAILED, CLEAR_ORDER } from '../types';\r\n\r\ntype TInitialState = {\r\n  orderNumber: number | null;\r\n  orderRequest: boolean;\r\n  orderFailed: boolean;\r\n};\r\n\r\nconst initialState: TInitialState = {\r\n  orderNumber: null,\r\n  orderRequest: false,\r\n  orderFailed: false\r\n};\r\n\r\nexport const orderReducer = (state = initialState, action: TOrderActions): TInitialState => {\r\n  switch (action.type) {\r\n    case GET_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderRequest: true\r\n      };\r\n    }\r\n    case GET_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderNumber: action.payload,\r\n        orderRequest: false,\r\n        orderFailed: false\r\n      };\r\n    }\r\n    case GET_ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        orderRequest: false,\r\n        orderFailed: true\r\n      };\r\n    }\r\n    case CLEAR_ORDER: {\r\n      return {\r\n        ...state,\r\n        orderNumber: null,\r\n        orderRequest: false,\r\n        orderFailed: false\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  ADD_CONSTRUCTOR_INGREDIENT,\r\n  INCREASE_CONSTRUCTOR_COUNT,\r\n  DECREASE_CONSTRUCTOR_COUNT,\r\n  ADD_CONSTRUCTOR_BUN,\r\n  DELETE_CONSTRUCTOR_INGREDIENT,\r\n  UPDATE_CONSTRUCTOR_INGREDIENTS\r\n} from '../types';\r\nimport { TBurgerConstructorActions } from '../actions/burgerConstructor';\r\nimport { TBurgerIngredientType } from '../../utils/types';\r\n\r\ntype TInitialState = {\r\n  constructorBuns: TBurgerIngredientType | null;\r\n  constructorIngredients: Array<TBurgerIngredientType> | [];\r\n  constructorCount: number;\r\n};\r\n\r\nconst initialState: TInitialState = {\r\n  constructorBuns: null,\r\n  constructorIngredients: [],\r\n  constructorCount: 0\r\n};\r\n\r\nexport const burgerConstructorReducer = (state = initialState, action: TBurgerConstructorActions): TInitialState => {\r\n  switch (action.type) {\r\n    case ADD_CONSTRUCTOR_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        constructorIngredients: [...state.constructorIngredients, action.payload]\r\n      };\r\n    }\r\n    case DELETE_CONSTRUCTOR_INGREDIENT: {\r\n      const key = action.payload;\r\n      const newConstructorIngredients = state.constructorIngredients.filter(item => item.key !== key);\r\n      return {\r\n        ...state,\r\n        constructorIngredients: newConstructorIngredients\r\n      };\r\n    }\r\n    case ADD_CONSTRUCTOR_BUN: {\r\n      return {\r\n        ...state,\r\n        constructorBuns: action.payload\r\n      };\r\n    }\r\n    case INCREASE_CONSTRUCTOR_COUNT: {\r\n      return {\r\n        ...state,\r\n        constructorCount: state.constructorCount + 1\r\n      };\r\n    }\r\n    case DECREASE_CONSTRUCTOR_COUNT: {\r\n      return {\r\n        ...state,\r\n        constructorCount: state.constructorCount - 1\r\n      };\r\n    }\r\n    case UPDATE_CONSTRUCTOR_INGREDIENTS: {\r\n      const newConstructorIngredients = [...state.constructorIngredients];\r\n      newConstructorIngredients.splice(action.payload.hoverIndex, 0, newConstructorIngredients.splice(action.payload.dragIndex, 1)[0]);\r\n      return {\r\n        ...state,\r\n        constructorIngredients: newConstructorIngredients\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { GET_BURGER_INGREDIENTS_REQUEST, GET_BURGER_INGREDIENTS_SUCCESS, GET_BURGER_INGREDIENTS_FAILED } from '../types';\r\nimport { TBurgerIngredientType } from '../../utils/types';\r\nimport { TGetBurgerIngredientsActions } from '../actions/burgerIngredients';\r\n\r\ntype TInitialState = {\r\n  ingredients: Array<TBurgerIngredientType> | null;\r\n  ingredientsRequest: boolean;\r\n  ingredientsFailed: boolean;\r\n  ingredientsLoaded: boolean;\r\n};\r\n\r\nconst initialState: TInitialState = {\r\n  ingredients: null,\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n  ingredientsLoaded: false\r\n};\r\n\r\nexport const burgerIngredientsReducer = (state = initialState, action: TGetBurgerIngredientsActions): TInitialState => {\r\n  switch (action.type) {\r\n    case GET_BURGER_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: true\r\n      };\r\n    }\r\n    case GET_BURGER_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredients: action.payload,\r\n        ingredientsRequest: false,\r\n        ingredientsFailed: false,\r\n        ingredientsLoaded: true\r\n      };\r\n    }\r\n    case GET_BURGER_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: false,\r\n        ingredientsFailed: true\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAILED,\r\n  AUTH_REQUEST,\r\n  AUTH_SUCCESS,\r\n  AUTH_FAILED,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT_SUCCESS,\r\n  LOGOUT_FAILED,\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  GET_USER_FAILED,\r\n  USER_UPDATE_REQUEST,\r\n  USER_UPDATE_SUCCESS,\r\n  USER_UPDATE_FAILED\r\n} from '../types';\r\nimport { TUser } from '../../utils/types';\r\nimport { TUserActions } from '../actions/user';\r\n\r\ntype TInitialState = {\r\n  registerRequest: boolean;\r\n  registerError: boolean;\r\n  authRequest: boolean;\r\n  authError: boolean;\r\n  logoutRequest: boolean;\r\n  logoutError: boolean;\r\n  errorText: string | null;\r\n  getUserRequest: boolean;\r\n  getUserError: boolean;\r\n  getUserLoaded: boolean;\r\n  userUpdateRequest: boolean;\r\n  userUpdateError: boolean;\r\n  isAuth: boolean;\r\n  user: TUser | null;\r\n};\r\n\r\nconst initialState: TInitialState = {\r\n  registerRequest: false,\r\n  registerError: false,\r\n  authRequest: false,\r\n  authError: false,\r\n  logoutRequest: false,\r\n  logoutError: false,\r\n  errorText: null,\r\n  getUserRequest: false,\r\n  getUserError: false,\r\n  getUserLoaded: false,\r\n  userUpdateRequest: false,\r\n  userUpdateError: false,\r\n  isAuth: false,\r\n  user: null\r\n};\r\n\r\nexport const userReducer = (state = initialState, action: TUserActions): TInitialState => {\r\n  switch (action.type) {\r\n    case REGISTER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        registerRequest: true\r\n      };\r\n    }\r\n    case REGISTER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerError: false,\r\n        errorText: ''\r\n      };\r\n    }\r\n    case REGISTER_FAILED: {\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerError: true,\r\n        errorText: 'Ошибка при регистрации'\r\n      };\r\n    }\r\n    case AUTH_REQUEST: {\r\n      return {\r\n        ...state,\r\n        authRequest: true\r\n      };\r\n    }\r\n    case AUTH_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        authRequest: false,\r\n        authError: false,\r\n        user: action.payload,\r\n        isAuth: true,\r\n        errorText: ''\r\n      };\r\n    }\r\n    case AUTH_FAILED: {\r\n      return {\r\n        ...state,\r\n        authRequest: false,\r\n        authError: true,\r\n        errorText: 'Ошибка при авторизации',\r\n        isAuth: false\r\n      };\r\n    }\r\n    case LOGOUT_REQUEST: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: true\r\n      };\r\n    }\r\n    case LOGOUT_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutError: false,\r\n        isAuth: false,\r\n        user: null,\r\n        errorText: ''\r\n      };\r\n    }\r\n    case LOGOUT_FAILED: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutError: true,\r\n        errorText: 'Ошибка при выходе пользователя'\r\n      };\r\n    }\r\n    case GET_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: true\r\n      };\r\n    }\r\n    case GET_USER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: false,\r\n        getUserError: false,\r\n        user: action.payload,\r\n        isAuth: true,\r\n        getUserLoaded: true,\r\n        errorText: ''\r\n      };\r\n    }\r\n    case GET_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: false,\r\n        getUserError: true,\r\n        errorText: 'Ошибка при получении данных пользователя',\r\n        getUserLoaded: false\r\n      };\r\n    }\r\n    case USER_UPDATE_REQUEST: {\r\n      return {\r\n        ...state,\r\n        userUpdateRequest: true\r\n      };\r\n    }\r\n    case USER_UPDATE_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        userUpdateRequest: false,\r\n        userUpdateError: false,\r\n        user: action.payload,\r\n        errorText: ''\r\n      };\r\n    }\r\n    case USER_UPDATE_FAILED: {\r\n      return {\r\n        ...state,\r\n        userUpdateRequest: false,\r\n        userUpdateError: true,\r\n        errorText: 'Ошибка при обновлении данных пользователя'\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { WS_CONNECTION_START, WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR, WS_CONNECTION_SUCCESS, WS_GET_MESSAGE, WS_SEND_MESSAGE } from '../types';\r\nimport { TOrder } from '../../utils/types';\r\nimport { TWSActions } from '../actions/orders';\r\n\r\ntype TInitialState = {\r\n  ordersAllRequest: boolean;\r\n  ordersAllFailed: boolean;\r\n  total: number;\r\n  totalToday: number;\r\n  orders: Array<TOrder>;\r\n  wsConnected: boolean;\r\n  error?: Event;\r\n};\r\n\r\nconst initialState: TInitialState = {\r\n  ordersAllRequest: false,\r\n  ordersAllFailed: false,\r\n  total: 0,\r\n  totalToday: 0,\r\n  orders: [],\r\n  wsConnected: false\r\n};\r\n\r\nexport const ordersReducer = (state = initialState, action: TWSActions): TInitialState => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_START: {\r\n      return {\r\n        ...state,\r\n        wsConnected: false\r\n      };\r\n    }\r\n    case WS_CONNECTION_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        error: undefined,\r\n        wsConnected: true\r\n      };\r\n    }\r\n    case WS_CONNECTION_ERROR: {\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        wsConnected: false\r\n      };\r\n    }\r\n    case WS_CONNECTION_CLOSED: {\r\n      return {\r\n        ...state,\r\n        error: undefined,\r\n        wsConnected: false\r\n      };\r\n    }\r\n    case WS_GET_MESSAGE: {\r\n      return {\r\n        ...state,\r\n        error: undefined,\r\n        total: action.payload.total,\r\n        totalToday: action.payload.totalToday,\r\n        orders: action.payload.orders\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { combineReducers, Action, ActionCreator, AnyAction } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { orderReducer } from './order';\r\nimport { burgerConstructorReducer } from './burgerConstructor';\r\nimport { burgerIngredientsReducer } from './burgerIngredients';\r\nimport { userReducer } from './user';\r\nimport { ordersReducer } from './orders';\r\nimport { store } from '../store';\r\n\r\nexport const rootReducer = combineReducers({\r\n  burgerIngredients: burgerIngredientsReducer,\r\n  burgerConstructor: burgerConstructorReducer,\r\n  order: orderReducer,\r\n  orders: ordersReducer,\r\n  user: userReducer\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport type AppThunk<ReturnType = void> = ActionCreator<ThunkAction<ReturnType, RootState, unknown, Action>>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n","import { compose, createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { rootReducer } from './reducers';\r\nimport { socketMiddleware } from './middlewares/socketMiddleware';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({} as any) : compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware()));\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import type { Middleware, MiddlewareAPI } from 'redux';\r\nimport { TWSActions } from '../actions/orders';\r\nimport type { AppDispatch, RootState } from '../reducers';\r\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR, WS_CONNECTION_START, WS_CONNECTION_SUCCESS, WS_GET_MESSAGE } from '../types';\r\n\r\nexport const socketMiddleware = (): Middleware => {\r\n  return ((store: MiddlewareAPI<AppDispatch, RootState>) => {\r\n    let socket: WebSocket | null = null;\r\n    return next => (action: TWSActions) => {\r\n      const { dispatch, getState } = store;\r\n      const { type, payload } = action;\r\n\r\n      if (type === WS_CONNECTION_START) socket = new WebSocket(payload);\r\n      if (socket) {\r\n        socket.onopen = event => dispatch({ type: WS_CONNECTION_SUCCESS, payload: event });\r\n        socket.onerror = event => dispatch({ type: WS_CONNECTION_ERROR, payload: event });\r\n        socket.onclose = event => dispatch({ type: WS_CONNECTION_CLOSED, payload: event });\r\n        socket.onmessage = event => dispatch({ type: WS_GET_MESSAGE, payload: JSON.parse(event.data) });\r\n      }\r\n      next(action);\r\n    };\r\n  }) as Middleware;\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\nimport { store } from './services/store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"BurgerConstructorItem_item__32umc\",\"itemData\":\"BurgerConstructorItem_itemData__16VIp\",\"itemDataBunTop\":\"BurgerConstructorItem_itemDataBunTop___uLcl BurgerConstructorItem_itemData__16VIp\",\"itemDataBunBottom\":\"BurgerConstructorItem_itemDataBunBottom__7n_Z7 BurgerConstructorItem_itemData__16VIp\",\"image\":\"BurgerConstructorItem_image__19hjv\",\"name\":\"BurgerConstructorItem_name__HB5-J\",\"price\":\"BurgerConstructorItem_price__1rwex\",\"priceValue\":\"BurgerConstructorItem_priceValue__3NQWF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"IngredientDetails_container__18nOc\",\"image\":\"IngredientDetails_image__-qURb\",\"properties\":\"IngredientDetails_properties__3HSDN\",\"property\":\"IngredientDetails_property__3HU4T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"BurgerIngredients_content__2qL9Y\",\"tabs\":\"BurgerIngredients_tabs__26tPs\",\"categories\":\"BurgerIngredients_categories__2uKdp\",\"category\":\"BurgerIngredients_category___JhhY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"ResetPassword_section__1e86A\",\"content\":\"ResetPassword_content__1u7-e\",\"form\":\"ResetPassword_form__2i49A\",\"button\":\"ResetPassword_button__Xtubz\",\"link\":\"ResetPassword_link__3F6PD\",\"hideInput\":\"ResetPassword_hideInput__31PdU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"BurgerIngredient_item__134MQ\",\"image\":\"BurgerIngredient_image__3p7ny\",\"price\":\"BurgerIngredient_price__1ZkjN\",\"priceValue\":\"BurgerIngredient_priceValue__1WrJp\",\"name\":\"BurgerIngredient_name__3KiHc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"BurgerConstructor_content__8PEcn\",\"list\":\"BurgerConstructor_list__1oxc8\",\"summary\":\"BurgerConstructor_summary__1eN9h\",\"summaryPrice\":\"BurgerConstructor_summaryPrice__3KZ2K\",\"summaryPriceValue\":\"BurgerConstructor_summaryPriceValue__3LASN\",\"button\":\"BurgerConstructor_button__1xhU5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"Login_section__3sSEB\",\"content\":\"Login_content__oDROn\",\"form\":\"Login_form__2dN9b\",\"button\":\"Login_button__3nriR\",\"link\":\"Login_link__27qGm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OrderDetails_container__21RFw\",\"order\":\"OrderDetails_order__12jEm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"Register_section__3WqDL\",\"content\":\"Register_content__3i2sl\",\"form\":\"Register_form__PbTsl\",\"button\":\"Register_button__MooeA\",\"link\":\"Register_link__tD8DX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"ForgotPassword_section__3Ytoa\",\"content\":\"ForgotPassword_content__BvGJr\",\"form\":\"ForgotPassword_form__21b_Q\",\"button\":\"ForgotPassword_button__2SKDq\",\"link\":\"ForgotPassword_link__1uPrG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"OrderCard_card__2Qi9T\",\"numberInfo\":\"OrderCard_numberInfo__1ngDt\",\"detailsInfo\":\"OrderCard_detailsInfo__4m1Ou\",\"cost\":\"OrderCard_cost__3df-T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__1tcsW\",\"closeIcon\":\"Modal_closeIcon__2dmhT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"App_main__3s1ee\",\"content\":\"App_content__3520N\"};"],"sourceRoot":""}